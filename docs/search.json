[
  {
    "objectID": "sigmoid-testing/sigmoid-nudging.html",
    "href": "sigmoid-testing/sigmoid-nudging.html",
    "title": "Nudges and sigmoid function",
    "section": "",
    "text": "library(pracma)\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n\nnudge_threshold &lt;- Vectorize(\n  function(t, a, nudge) {\n    c &lt;- logit(t, a = a)\n    sigmoid(c + nudge, a = a)\n  }\n)\n\n\ndf &lt;- expand_grid(\n  `Baseline p` = c(0.01, 0.05, 0.1, 0.25, 0.5),\n  Responsiveness = c(0.2, 0.5, 1, 2, 3),\n  Nudge = -10:20 / 10\n) %&gt;%\n  as_tibble() %&gt;%\n  mutate(`Nudged p` = nudge_threshold(`Baseline p`, Responsiveness, Nudge))\n\n\nggplot(df) +\n  geom_line(aes(x = Nudge, y = `Nudged p`, group = `Baseline p`)) + \n  geom_hline(aes(yintercept = `Baseline p`), colour = \"red\", lty = \"dashed\") +\n  facet_grid(`Baseline p` ~ Responsiveness, labeller = label_both) + \n  theme_bw()"
  },
  {
    "objectID": "core-loop.html",
    "href": "core-loop.html",
    "title": "Notes on the core loop of the ABM",
    "section": "",
    "text": "Update History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2024-07-02\nInitial post.\n\n\n2024-07-03\nAdded bar chart of farm income/costs estimates.\n\n\n2024-07-04\nAdded detail on calculation of relative change noting that profit can’t be handled this way because it is \\pm and relative change is meaningless for such variables.\nThese notes are intended to make it easier to discuss with colleagues if we are approaching the core decision loop in the agent-based model (ABM) for ‘Moving the Middle’ (MtM) in a coherent and reasonable way."
  },
  {
    "objectID": "core-loop.html#baseline-income-equation-for-farms",
    "href": "core-loop.html#baseline-income-equation-for-farms",
    "title": "Notes on the core loop of the ABM",
    "section": "Baseline income equation for farms",
    "text": "Baseline income equation for farms\nThe baseline profit Z of each hectare of a farm is given by\nZ=Y-X\nwhere Y is gross income, and X is total costs. These are in turn given by\n\n\\begin{array}{rcl}\nY &=& pq \\\\\nX &=& \\left(x+te\\right)\n\\end{array}\n\nwhere\n\np is the price obtained per unit,\nq is the quantity produced per hectare,\nx is the cost per hectare to operate,\ne is the greenhouse gas emissions per hectare, and\nt is the tax on each unit of emissions.\n\nEach of these parameters may depend on the farm type F (one of Crops, Dairy, Forestry, or Sheep/Beef) and the land use capability (LUC), L, such that the full calculation of profit for each hectare of a farm is \nZ_{FL} = p_Fq_{FL} - x_{FL} - te_{FL}\n and total farm profit is obtaining by summing this quantity across all hectares of the farm (which may be of varying landuse capability L).\n\nParameter values\nThe parameter values are stored in a number of CSV files which are read in by the model at start up.\n\nPrices\np_F and the greenhouse gas tax (i.e. carbon price), t, are in the prices.csv file:\n\n\nCode\nprices &lt;- read.csv(\"data/market/prices.csv\", \n                   header = T, row.names = 1) |&gt; \n  slice(1:2) # only rows 1 & 2 relevant\nprices |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F)\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Price_Commodity \n    5 \n    7.5 \n    157 \n    0.5 \n  \n  \n    Price_GhG \n    25 \n    25.0 \n    25 \n    25.0 \n  \n\n\n\n\n\n\n\nYields\nYields by farm type and landuse capability, q_{FL}, are in the commodity-yields.csv file:\n\n\nCode\nyields &lt;- read.csv(\"data/market/commodity-yields.csv\", \n                   header = T, row.names = 1)\nyields |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    LUC1_Mean \n    768.505660 \n    1503.0000 \n    30.0 \n    9667.000 \n  \n  \n    LUC1_SD \n    153.701132 \n    300.6000 \n    6.0 \n    1933.400 \n  \n  \n    LUC2_Mean \n    581.247332 \n    1283.0000 \n    29.0 \n    9183.650 \n  \n  \n    LUC2_SD \n    116.249466 \n    256.6000 \n    5.8 \n    1836.730 \n  \n  \n    LUC3_Mean \n    372.371287 \n    1174.3000 \n    28.0 \n    8724.468 \n  \n  \n    LUC3_SD \n    74.474257 \n    234.8600 \n    5.6 \n    1744.893 \n  \n  \n    LUC4_Mean \n    332.178378 \n    923.3900 \n    27.0 \n    8288.244 \n  \n  \n    LUC4_SD \n    66.435676 \n    184.6780 \n    5.4 \n    1657.649 \n  \n  \n    LUC5_Mean \n    259.480336 \n    877.7308 \n    26.0 \n    7873.832 \n  \n  \n    LUC5_SD \n    51.896067 \n    175.5462 \n    5.2 \n    1574.766 \n  \n  \n    LUC6_Mean \n    207.386971 \n    845.7812 \n    25.0 \n    7480.140 \n  \n  \n    LUC6_SD \n    41.477394 \n    169.1562 \n    5.0 \n    1496.028 \n  \n  \n    LUC7_Mean \n    193.188428 \n    700.0000 \n    24.0 \n    7106.133 \n  \n  \n    LUC7_SD \n    38.637686 \n    140.0000 \n    4.8 \n    1421.227 \n  \n  \n    LUC8_Mean \n    49.945208 \n    661.0000 \n    23.0 \n    6750.827 \n  \n  \n    LUC8_SD \n    9.989042 \n    132.2000 \n    4.6 \n    1350.165 \n  \n\n\n\n\n\n\n\nCosts\nBase costs per ha. by farm type and landuse capability, x_{FL}, are in the input-costs.csv file:\n\n\nCode\ncosts &lt;- read.csv(\"data/market/input-costs.csv\", \n                   header = T, row.names = 1)\ncosts |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    LUC1_Mean \n    3500 \n    9500 \n    4000 \n    3000 \n  \n  \n    LUC1_SD \n    700 \n    1900 \n    800 \n    600 \n  \n  \n    LUC2_Mean \n    2650 \n    8050 \n    4000 \n    2850 \n  \n  \n    LUC2_SD \n    530 \n    1610 \n    800 \n    570 \n  \n  \n    LUC3_Mean \n    1625 \n    7350 \n    3850 \n    2675 \n  \n  \n    LUC3_SD \n    325 \n    1470 \n    770 \n    535 \n  \n  \n    LUC4_Mean \n    1450 \n    5500 \n    3700 \n    2500 \n  \n  \n    LUC4_SD \n    290 \n    1100 \n    740 \n    500 \n  \n  \n    LUC5_Mean \n    1110 \n    5200 \n    3550 \n    2400 \n  \n  \n    LUC5_SD \n    222 \n    1040 \n    710 \n    480 \n  \n  \n    LUC6_Mean \n    875 \n    5000 \n    3500 \n    2200 \n  \n  \n    LUC6_SD \n    175 \n    1000 \n    700 \n    440 \n  \n  \n    LUC7_Mean \n    810 \n    4000 \n    3375 \n    2100 \n  \n  \n    LUC7_SD \n    162 \n    800 \n    675 \n    420 \n  \n  \n    LUC8_Mean \n    125 \n    4000 \n    3250 \n    2000 \n  \n  \n    LUC8_SD \n    25 \n    800 \n    650 \n    400 \n  \n\n\n\n\n\n\n\nEmissions\nEmissions per ha. by farm type and landuse capability, e_{FL}, are in the ghg-emissions.csv file:\n\n\nCode\nemissions &lt;- read.csv(\"data/market/ghg-emissions.csv\", \n                      header = T, row.names = 1)\nemissions |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    LUC1_Mean \n    4.000 \n    11.00 \n    -15.000000 \n    1.2000000 \n  \n  \n    LUC1_SD \n    1.200 \n    3.30 \n    4.500000 \n    0.3600000 \n  \n  \n    LUC2_Mean \n    3.750 \n    10.50 \n    -14.250000 \n    1.1400000 \n  \n  \n    LUC2_SD \n    1.125 \n    3.15 \n    4.275000 \n    0.3420000 \n  \n  \n    LUC3_Mean \n    3.500 \n    10.00 \n    -13.537500 \n    1.0830000 \n  \n  \n    LUC3_SD \n    1.050 \n    3.00 \n    4.061250 \n    0.3249000 \n  \n  \n    LUC4_Mean \n    3.250 \n    9.50 \n    -12.860625 \n    1.0288500 \n  \n  \n    LUC4_SD \n    0.975 \n    2.85 \n    3.858188 \n    0.3086550 \n  \n  \n    LUC5_Mean \n    3.000 \n    9.00 \n    -12.217594 \n    0.9774075 \n  \n  \n    LUC5_SD \n    0.900 \n    2.70 \n    3.665278 \n    0.2932223 \n  \n  \n    LUC6_Mean \n    2.750 \n    8.50 \n    -11.606714 \n    0.9285371 \n  \n  \n    LUC6_SD \n    0.825 \n    2.55 \n    3.482014 \n    0.2785611 \n  \n  \n    LUC7_Mean \n    2.500 \n    8.00 \n    -11.026378 \n    0.8821103 \n  \n  \n    LUC7_SD \n    0.750 \n    2.40 \n    3.307914 \n    0.2646331 \n  \n  \n    LUC8_Mean \n    2.250 \n    7.50 \n    -10.475059 \n    0.8380048 \n  \n  \n    LUC8_SD \n    0.675 \n    2.25 \n    3.142518 \n    0.2514014 \n  \n\n\n\n\n\n \nNote that all of yields, base costs, and emissions are stored as a mean and a standard deviation, and that individual hectare sites will see these numbers vary every model time period by drawing from a normal distribution.\nWe can use these data to show the profit, gross income, and total costs for each farm type across different landuse capability classes. We’ll throw away the standard deviations for simplicity and consider only mean outcomes.\n\n\nCode\nprices &lt;- prices |&gt; \n  t() |&gt; \n  as.data.frame() |&gt; \n  tibble::rownames_to_column(\"farm_type\") |&gt;\n  rename(price = Price_Commodity, carbon_tax = Price_GhG) |&gt;\n  slice(rep(row_number(), 8)) |&gt;\n  mutate(LUC = rep(1:8, each = 4))\n\nyields &lt;- yields |&gt;\n  slice(seq(1, 15, 2)) |&gt; \n  t() |&gt; \n  as.data.frame() |&gt; \n  tibble::rownames_to_column(\"farm_type\") |&gt;\n  pivot_longer(-1) |&gt;\n  mutate(LUC = rep(1:8, 4), yield = round(value, 1)) |&gt;\n  select(farm_type, LUC, yield)\n\ncosts &lt;- costs |&gt;\n  slice(seq(1, 15, 2)) |&gt; \n  t() |&gt; \n  as.data.frame() |&gt; \n  tibble::rownames_to_column(\"farm_type\") |&gt;\n  pivot_longer(-1) |&gt;\n  mutate(LUC = rep(1:8, 4), costs = round(value, 1)) |&gt;\n  select(farm_type, LUC, costs)\n\nemissions &lt;- emissions |&gt; \n  slice(seq(1, 15, 2)) |&gt; \n  t() |&gt; \n  as.data.frame() |&gt; \n  tibble::rownames_to_column(\"farm_type\") |&gt;\n  pivot_longer(-1) |&gt;\n  mutate(LUC = rep(1:8, 4), emissions = round(value, 1)) |&gt;\n  select(farm_type, LUC, emissions)\n\ncombined_data &lt;- prices |&gt;\n  left_join(yields) |&gt;\n  left_join(costs) |&gt;\n  left_join(emissions) |&gt;\n  mutate(gross_income = price * yield, # LUC = as.factor(LUC),\n         total_costs = costs + carbon_tax * emissions, base_costs = costs,\n         profit = gross_income - total_costs) |&gt;\n  select(farm_type, LUC, profit, price, yield, gross_income, base_costs,\n         emissions, carbon_tax, total_costs) |&gt;\n  rename(Profit = profit, `Gross income` = gross_income, `Total costs` = total_costs)\n\ncombined_data |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    farm_type \n    LUC \n    Profit \n    price \n    yield \n    Gross income \n    base_costs \n    emissions \n    carbon_tax \n    Total costs \n  \n \n\n  \n    SNB \n    1 \n    242.50 \n    5.0 \n    768.5 \n    3842.50 \n    3500 \n    4.0 \n    25 \n    3600.0 \n  \n  \n    Dairy \n    1 \n    1497.50 \n    7.5 \n    1503.0 \n    11272.50 \n    9500 \n    11.0 \n    25 \n    9775.0 \n  \n  \n    Forest \n    1 \n    1085.00 \n    157.0 \n    30.0 \n    4710.00 \n    4000 \n    -15.0 \n    25 \n    3625.0 \n  \n  \n    Crop \n    1 \n    1803.50 \n    0.5 \n    9667.0 \n    4833.50 \n    3000 \n    1.2 \n    25 \n    3030.0 \n  \n  \n    SNB \n    2 \n    161.00 \n    5.0 \n    581.2 \n    2906.00 \n    2650 \n    3.8 \n    25 \n    2745.0 \n  \n  \n    Dairy \n    2 \n    1310.00 \n    7.5 \n    1283.0 \n    9622.50 \n    8050 \n    10.5 \n    25 \n    8312.5 \n  \n  \n    Forest \n    2 \n    908.00 \n    157.0 \n    29.0 \n    4553.00 \n    4000 \n    -14.2 \n    25 \n    3645.0 \n  \n  \n    Crop \n    2 \n    1714.30 \n    0.5 \n    9183.6 \n    4591.80 \n    2850 \n    1.1 \n    25 \n    2877.5 \n  \n  \n    SNB \n    3 \n    149.50 \n    5.0 \n    372.4 \n    1862.00 \n    1625 \n    3.5 \n    25 \n    1712.5 \n  \n  \n    Dairy \n    3 \n    1207.25 \n    7.5 \n    1174.3 \n    8807.25 \n    7350 \n    10.0 \n    25 \n    7600.0 \n  \n  \n    Forest \n    3 \n    883.50 \n    157.0 \n    28.0 \n    4396.00 \n    3850 \n    -13.5 \n    25 \n    3512.5 \n  \n  \n    Crop \n    3 \n    1659.75 \n    0.5 \n    8724.5 \n    4362.25 \n    2675 \n    1.1 \n    25 \n    2702.5 \n  \n  \n    SNB \n    4 \n    131.00 \n    5.0 \n    332.2 \n    1661.00 \n    1450 \n    3.2 \n    25 \n    1530.0 \n  \n  \n    Dairy \n    4 \n    1188.00 \n    7.5 \n    923.4 \n    6925.50 \n    5500 \n    9.5 \n    25 \n    5737.5 \n  \n  \n    Forest \n    4 \n    861.50 \n    157.0 \n    27.0 \n    4239.00 \n    3700 \n    -12.9 \n    25 \n    3377.5 \n  \n  \n    Crop \n    4 \n    1619.10 \n    0.5 \n    8288.2 \n    4144.10 \n    2500 \n    1.0 \n    25 \n    2525.0 \n  \n  \n    SNB \n    5 \n    112.50 \n    5.0 \n    259.5 \n    1297.50 \n    1110 \n    3.0 \n    25 \n    1185.0 \n  \n  \n    Dairy \n    5 \n    1157.75 \n    7.5 \n    877.7 \n    6582.75 \n    5200 \n    9.0 \n    25 \n    5425.0 \n  \n  \n    Forest \n    5 \n    837.00 \n    157.0 \n    26.0 \n    4082.00 \n    3550 \n    -12.2 \n    25 \n    3245.0 \n  \n  \n    Crop \n    5 \n    1511.90 \n    0.5 \n    7873.8 \n    3936.90 \n    2400 \n    1.0 \n    25 \n    2425.0 \n  \n  \n    SNB \n    6 \n    92.00 \n    5.0 \n    207.4 \n    1037.00 \n    875 \n    2.8 \n    25 \n    945.0 \n  \n  \n    Dairy \n    6 \n    1131.00 \n    7.5 \n    845.8 \n    6343.50 \n    5000 \n    8.5 \n    25 \n    5212.5 \n  \n  \n    Forest \n    6 \n    715.00 \n    157.0 \n    25.0 \n    3925.00 \n    3500 \n    -11.6 \n    25 \n    3210.0 \n  \n  \n    Crop \n    6 \n    1517.55 \n    0.5 \n    7480.1 \n    3740.05 \n    2200 \n    0.9 \n    25 \n    2222.5 \n  \n  \n    SNB \n    7 \n    93.50 \n    5.0 \n    193.2 \n    966.00 \n    810 \n    2.5 \n    25 \n    872.5 \n  \n  \n    Dairy \n    7 \n    1050.00 \n    7.5 \n    700.0 \n    5250.00 \n    4000 \n    8.0 \n    25 \n    4200.0 \n  \n  \n    Forest \n    7 \n    668.00 \n    157.0 \n    24.0 \n    3768.00 \n    3375 \n    -11.0 \n    25 \n    3100.0 \n  \n  \n    Crop \n    7 \n    1430.55 \n    0.5 \n    7106.1 \n    3553.05 \n    2100 \n    0.9 \n    25 \n    2122.5 \n  \n  \n    SNB \n    8 \n    69.50 \n    5.0 \n    49.9 \n    249.50 \n    125 \n    2.2 \n    25 \n    180.0 \n  \n  \n    Dairy \n    8 \n    770.00 \n    7.5 \n    661.0 \n    4957.50 \n    4000 \n    7.5 \n    25 \n    4187.5 \n  \n  \n    Forest \n    8 \n    623.50 \n    157.0 \n    23.0 \n    3611.00 \n    3250 \n    -10.5 \n    25 \n    2987.5 \n  \n  \n    Crop \n    8 \n    1355.40 \n    0.5 \n    6750.8 \n    3375.40 \n    2000 \n    0.8 \n    25 \n    2020.0 \n  \n\n\n\n\n\n\n\n\nOr visually…\nBelow are shown the income, costs, and net revenue per hectare for each farm type across the eight landuse capability classes. These are crude estimates dating back to the ARLUNZ model1 and will be updated in due course.\n\n\nCode\nplot_data &lt;- combined_data |&gt; \n  pivot_longer(cols = c(\"Gross income\", \"Profit\", \"Total costs\"))\n\nggplot(plot_data |&gt; filter(name %in% c(\"Gross income\", \"Total costs\"))) +\n  geom_col(aes(x = as.factor(LUC), y = value, group = name, fill = name),\n           position = \"dodge\") + \n  scale_fill_manual(values = c(\"#999999\", \"#ff6666\"), name = \"Income vs. Costs\") +\n  geom_point(data = plot_data |&gt; filter(name == \"Profit\"), \n            aes(x = LUC, y = value, shape = name), size = 7) +\n  scale_shape_manual(values = \"\\u2014\", name = \"\") + # \\u2014 is an em-dash\n  # The below more correct, but doesn't extend the lines to the full width of the plot\n  # geom_step(data = plot_data |&gt; filter(name == \"Profit\"), \n  #           aes(x = LUC, y = value, group = farm_type, colour = name), \n  #           direction = \"mid\", lwd = 0.65) +\n  # scale_colour_manual(values = c(\"black\"), name = \"\") +\n  xlab(\"Landuse Capability (LUC)\") +\n  ylab(\"Profit, $ per ha.\") +\n  facet_wrap(~ farm_type) +\n  theme_minimal()"
  },
  {
    "objectID": "core-loop.html#the-effect-of-interventions",
    "href": "core-loop.html#the-effect-of-interventions",
    "title": "Notes on the core loop of the ABM",
    "section": "The effect of interventions",
    "text": "The effect of interventions\nA range of possible interventions I=\\{i_1,i_2,\\ldots i_n\\} may be undertaken by farmers, such as\n\nEstablish a wetland\nRiparian planting\nClean races\nDevelop a farm plan\nJoin the emissions trading scheme\netc.\n\nThe currently adopted interventions on a particular farm we denote A which will be a subset of the available interventions I. Not all interventions will make sense on each farm, so it might be more accurate to think of there being a number of intervention sets I_F and on a particular farm of type F, the adopted interventions A are some subset of I_F, with the potential new interventions to be considered in each time interval given by I_F\\setminus A, that is the possible interventions on this type of farm not yet adopted.\nFor each intervention i_i there are associated impacts, in terms of added costs \\Delta x_{iFL}, and changes in yields \\Delta q_{iFL} and emissions \\Delta e_{iFL}, where the F and L subscripts indicate the dependence of these impacts on farm type F and landuse capability L. The impacts of various interventions are stored in the intervention-impacts.csv file:\n\n\nCode\ninterventions &lt;- read.csv(\"data/market/intervention-impacts.csv\", \n                          header = T)\ninterventions |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    Intervention \n    Impact \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Build_Wetland \n    costs \n    25.00 \n    68.00 \n    NA \n    34.00 \n  \n  \n    Build_Wetland \n    yields \n    -0.20 \n    -0.02 \n    NA \n    -0.10 \n  \n  \n    Build_Wetland \n    emissions \n    -0.10 \n    -0.05 \n    NA \n    -0.05 \n  \n  \n    Riparian_Planting \n    costs \n    26.00 \n    71.00 \n    NA \n    11.00 \n  \n  \n    Riparian_Planting \n    yields \n    -0.20 \n    -0.02 \n    NA \n    -0.01 \n  \n  \n    Riparian_Planting \n    emissions \n    -0.10 \n    -0.03 \n    NA \n    -0.04 \n  \n  \n    Clean_Races \n    costs \n    NA \n    75.00 \n    NA \n    NA \n  \n  \n    Clean_Races \n    yields \n    NA \n    0.00 \n    NA \n    NA \n  \n  \n    Clean_Races \n    emissions \n    NA \n    -0.01 \n    NA \n    NA \n  \n  \n    Farm_Plan \n    costs \n    6.00 \n    34.00 \n    NA \n    NA \n  \n  \n    Farm_Plan \n    yields \n    -0.05 \n    -0.01 \n    NA \n    NA \n  \n  \n    Farm_Plan \n    emissions \n    -0.06 \n    -0.05 \n    NA \n    NA \n  \n  \n    Join_ETS \n    costs \n    1.00 \n    25.00 \n    50.0 \n    100.00 \n  \n  \n    Join_ETS \n    yields \n    -0.25 \n    -0.25 \n    0.1 \n    -0.10 \n  \n  \n    Join_ETS \n    emissions \n    -0.50 \n    -0.50 \n    0.1 \n    -0.25 \n  \n\n\n\n\n\n \nThe adopted interventions on a particular farm, change its yield to \nq = q_{FL}\\prod_{i\\in A} \\left( 1+\\Delta q_{iFL} \\right)\n its total costs to \nx = x_{FL} + \\sum_{i\\in A} \\Delta x_{iFL}\n and its emissions to \ne = e_{FL}\\prod_{i\\in A} \\left(1+\\Delta e_{iFL}\\right)\n Together these give us an overall profit for each hectare of landuse capability L on a farm of type F that has adopted a set of interventions A \n{\nY_A = \\underbrace{ p_Fq_{FL}\\prod_{i\\in A} \\left( 1+\\Delta q_{iFL} \\right)}_{\\mathrm{gross\\thinspace income}\\,Y} -\n\\underbrace{\n  \\underbrace{\\left( x_{FL} + \\sum_{i\\in A}\\Delta x_{iFL} \\right)}_{\\mathrm{base\\thinspace costs}} -\n  \\underbrace{te_{FL}\\prod_{i\\in A} \\left(1+\\Delta e_{iFL} \\right)}_{\\mathrm{carbon\\thinspace costs}}\n}_{\\mathrm{total\\thinspace costs}\\,X}\n}\n and the overall profit of any farm is given by summing this result across its constituent hectares. It is convenient to think of the profit as being the difference in the gross income given by the first term in the above equation, and total costs given by the second and third terms."
  },
  {
    "objectID": "core-loop.html#considering-interventions",
    "href": "core-loop.html#considering-interventions",
    "title": "Notes on the core loop of the ABM",
    "section": "Considering interventions",
    "text": "Considering interventions\nThe current profit of a farm is determined as in the previous section. Call the current profit, gross income, and total cost components \\tilde{Y}_0 and \\tilde{X}_0, respectively.\nThen, for each intervention under consideration, i.e., each intervention i_i\\in I_F\\setminus A, the new expected gross income, and total costs that would result \\bar{Y}_i and \\bar{X}_i are determined using the same equation, but with A_i=A\\cup\\{i_i\\} augmented to include the new intervention, and no variance in outcomes taken into consideration, i.e., using only the mean yield, costs, and emissions settings (the \\tilde{Y}_0 and \\tilde{X}_0 values will reflect that variance in the most recent year’s results).\nThis gives us relative change in each component, which for a particular component we define as \n\\Delta x = \\left\\{\n\\begin{array}{rl}\n  \\left. 200\\left(|x_1 - x_0|\\right) \\middle/ \\left( |x_1| + |x_0| \\right) \\right. & \\text{if $x_1&gt;x_0$} \\\\\n  \\left. -200\\left(|x_1 - x_0|\\right) \\middle/ \\left( |x_1| + |x_0| \\right) \\right. & \\text{if $x_1&lt;x_0$} \\\\\n  0 & \\text{if $x_0$ and $x_1=0$}\n\\end{array}\\right.\n\nNOTE: this formulation works if both quantities are of the same sign (both positive, or both negative) but produces meaningless results if the before and after quantities are of different sign, and so the approach outlined here should not be extended to the profit of farms, which may be either negative or positive.\nValues for \\Delta Y_i and \\Delta X_i are calculated in this way and used to determine adjusted relative probabilities of adoption of each possible intervention. If we denote the baseline probability of adoption of each intervention on a particular farm type by P_{iF} then we adjust this probability using the ’\\Delta’s according to \n{\n  P'_{iF}= \\left. 1 \\middle/ \\left(1+e^{\\ln\\frac{P_{iF}}{1-P_{iF}} +\n  \\Delta R_i + \\Delta Y_i - \\Delta X_i} \\right) \\right.\n}\n\nThis puts the adoption probability of any intervention on a sigmoid curve, given by P = 1/(1 + e^{-ax}) where x is some ‘input’ and a is a rate of change in the probability in response to changes in the inputs. We haven’t determined an appropriate setting for a, but intuitively it is a kind of measure of the ‘elasticity’ of farmer responses to changes in the combination of pressures driving their decision making. At low a large pushes are needed to make much difference to the probability of a particular intervention; at high a smaller pushes (perhaps even nudges!) might suffice.\n\n\nCode\nsigmoid &lt;- function(x, a = 1) {\n  1 / (1 + exp(-a * x))\n}\n\ndf &lt;- expand_grid(`Pressure to change` = -50:50 / 10, \n                  a = c(0.25, 0.5, 1, 2, 5)) |&gt;\n  mutate(Probability = sigmoid(`Pressure to change`, a))\n\nggplot(df) + \n  geom_line(aes(x = `Pressure to change`, y = Probability, group = a)) +\n  annotate(\"label\", x = c(4.25, 3.9, 3, 2, 1), \n           y = c(0.74, 0.87, 0.95, 0.975, 0.99),\n           label = paste0(\"a = \", unique(df$a)))\n\n\n\n\n\n\n\n\n\nA positive calculated change in either net revenue \\Delta R_i, or income \\Delta Y_i, pushes the farmer’s probability of adoption of intervention i higher (to the right), and any increase in total costs \\Delta X_i pushes it lower (to the left). We start with initial probabilities of adoption in the farmer-threshold-matrix.csv file:\n\n\nCode\nprobabilities &lt;- read.csv(\"data/market/farmer-threshold-matrix.csv\", \n                          header = T, row.names = 1)\nprobabilities |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F)\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Build_Wetland \n    0.7 \n    0.75 \n    0.3 \n    0.5 \n  \n  \n    Riparian_Planting \n    0.7 \n    0.75 \n    0.2 \n    0.4 \n  \n  \n    Clean_Races \n    0.2 \n    0.70 \n    0.0 \n    0.0 \n  \n  \n    Farm_Plan \n    0.7 \n    0.85 \n    0.4 \n    0.6 \n  \n  \n    Join_ETS \n    0.2 \n    0.20 \n    0.9 \n    0.4 \n  \n\n\n\n\n\nThe exact slope and configuration of the sigmoid function relative to these probabilities (which are themselves arbitrary at present) remains to be determined, and may be tuneable to yield plausible outcomes. The general principle is that nudges increase the presure on farmers to change and will move them to the right on these curves, but that increases to costs will act against such pressures."
  },
  {
    "objectID": "core-loop.html#adopting-an-intervention",
    "href": "core-loop.html#adopting-an-intervention",
    "title": "Notes on the core loop of the ABM",
    "section": "Adopting an intervention",
    "text": "Adopting an intervention\nAll possible interventions are considered and assigned a probability P'_{iF} on the above basis, giving a set of values P=\\{P_{iF}\\}. These are treated as ‘weights’ on a random draw of a single intervention. More favoured interventions are more likely to be drawn.\nIf a particular intervention is clearly preferable, say \nP=\\{0.01,0.01,0.5\\}\n then it will almost certainly be chosen for further consideration. If all options are similar in their impacts, say \nP=\\{0.2,0.15,0.25\\}\n then any of them stands a good chance of being picked.\nThe intervention picked in this way is then adopted with probability P'_{iF}. This means that \nP=\\{0.1,0.1,0.1\\}\n might put forward any intervention for consideration but that chosen intervention is still unlikely to be adopted. On the other hand \nP=\\{0.5,0.5,0.5\\}\n will give the selected intervention a 50% chance of adoption when it is considered.\nOnce an intervention is adopted, it will no longer be available in the next decision round and its impacts will be factored into calculation of the new Y_0 and X_0 income and costs, serving as a new baseline for the determination of \\Delta Y_i and \\Delta X_i scores."
  },
  {
    "objectID": "core-loop.html#footnotes",
    "href": "core-loop.html#footnotes",
    "title": "Notes on the core loop of the ABM",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSee: Morgan FJ and AJ Daigneault. 2015. Estimating Impacts of Climate Change Policy on Land Use: An Agent-Based Modelling Approach. PLOS ONE 10(5): e0127317.↩︎"
  }
]