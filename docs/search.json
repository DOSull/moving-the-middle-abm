[
  {
    "objectID": "model-description/index.html",
    "href": "model-description/index.html",
    "title": "Moving the Middle ABM description",
    "section": "",
    "text": "These documents provide an overall description of the operation of the agent-based model under development for the Moving the Middle project. The model is only as complicated as (we think) it needs to be, but that turns out to be relatively complicated, and there are a lot of moving parts.\nAs a way to manage this complexity I have organised the description into a set of linked documents as listed below.\nIncluded is a document with possible extensions to the model where I will add further anticipated changes arising from colleagues’ suggestions for experiments that might be conducted using the model.\nThe model code is available for download at this repository.\n\n\n\n\n\n\n\n\n\n\nTitle\n\n\n\n\n\n\nOverall model structure\n\n\n\n\nElements of the model\n\n\n\n\nOrganisation of folders and files\n\n\n\n\nModel initialisation\n\n\n\n\nModel main loop\n\n\n\n\nFarmer aging and succession\n\n\n\n\nCalculation of holding income\n\n\n\n\nFarmer decision making: general\n\n\n\n\nFarmer exit market (succession)\n\n\n\n\nSurvival mode\n\n\n\n\nConstrained mode\n\n\n\n\nOptimisation mode\n\n\n\n\nFarmer decisions about management interventions\n\n\n\n\nPossible extensions of the model\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Moving the Middle ABM description"
    ]
  },
  {
    "objectID": "model-description/documents/02-calculation-of-holding-income.html",
    "href": "model-description/documents/02-calculation-of-holding-income.html",
    "title": "Calculation of holding income",
    "section": "",
    "text": "The baseline profit Z of each hectare of a holding is given by\nZ=Y-X\nwhere Y is gross income, and X is total costs. These are in turn given by\n\n\\begin{array}{rcl}\nY &=& pq \\\\\nX &=& x+te\n\\end{array}\n\nwhere\n\np is the price obtained per unit,\nq is the quantity produced per hectare,\nx is the cost per hectare to operate,\ne_i are various environmental metrics per hectare, most obviously greenhouse gas emissions, and\nt_i are any environmental taxes associated with each environmental metric.\n\nEach of these parameters may depend on the farm type F and the land use capability (LUC), L, such that the full calculation of profit for each hectare of a holding is \nZ_{FL} = p_Fq_{FL} - x_{FL} - \\sum_i t_ie_{i,FL}\n and total holding profit is obtaining by summing this quantity across all hectares of the holding. Overall profit of a farm is determined by summation across all its constituent holdings. Note that while currently all cells in a holding have the same LUC this is not a requirement and the calculation will work equally well if LUC were to vary across a holding.\n\n\nThe parameter values are stored in a number of CSV files which are read in by the model at start up from the .data/market/&lt;scenario&gt; folder specified.\n\n\np_F is found in the prices.csv file:\n\n\nCode\nprices &lt;- read.csv(str_glue(\"{base_dir}/prices.csv\"), \n                   header = T, row.names = 1) |&gt; \n  slice(1:2) # only rows 1 & 2 relevant\nprices |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F)\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    price \n    5 \n    7.5 \n    157 \n    0.5 \n  \n\n\n\n\n\nEnvironmental taxes t_i are found in the environmental-metrics.csv file in the price column. In the example below the tax associated with greenhouse gas emissions is $10 per unit per ha and no tax is levied on nitrates. Other possible metrics are excluded from consideration by the file shown as they are ‘commented out’ with the # prefix.\n\n\nCode\nprint(read.csv(str_glue(\"{base_dir}/environmental-metrics.csv\"), header = T, row.names = 1))\n\n\n              limit price\nghg_emissions    10    10\nnitrates         11     0\nsediment         10     0\nphosphates        1     0\ne_coli            4     0\n\n\nIn the remainder of this page we assume only greenhouse gases are taxed and use the simplified form te for the environmental tax burden in preference to the more complete \\sum_i t_ie_{i,FL} shown above.\n\n\n\nYields by farm type and land use capability, q_{FL}, are in the commodity-yields.csv file:\n\n\nCode\nyields &lt;- read.csv(str_glue(\"{base_dir}/yields.csv\"), header = T)\nyields |&gt; \n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    mean_or_sd \n    LUC \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Mean \n    1 \n    768.5 \n    1503.0 \n    30.0 \n    9667.0 \n  \n  \n    Mean \n    2 \n    581.2 \n    1283.0 \n    29.0 \n    9183.6 \n  \n  \n    Mean \n    3 \n    372.4 \n    1174.3 \n    28.0 \n    8724.5 \n  \n  \n    Mean \n    4 \n    332.2 \n    923.4 \n    27.0 \n    8288.2 \n  \n  \n    Mean \n    5 \n    259.5 \n    877.7 \n    26.0 \n    7873.8 \n  \n  \n    Mean \n    6 \n    207.4 \n    845.8 \n    25.0 \n    7480.1 \n  \n  \n    Mean \n    7 \n    193.2 \n    700.0 \n    24.0 \n    7106.1 \n  \n  \n    Mean \n    8 \n    49.9 \n    661.0 \n    23.0 \n    6750.8 \n  \n  \n    SD \n    1 \n    153.7 \n    300.6 \n    6.0 \n    1933.4 \n  \n  \n    SD \n    2 \n    116.2 \n    256.6 \n    5.8 \n    1836.7 \n  \n  \n    SD \n    3 \n    74.5 \n    234.9 \n    5.6 \n    1744.9 \n  \n  \n    SD \n    4 \n    66.4 \n    184.7 \n    5.4 \n    1657.6 \n  \n  \n    SD \n    5 \n    51.9 \n    175.5 \n    5.2 \n    1574.8 \n  \n  \n    SD \n    6 \n    41.5 \n    169.2 \n    5.0 \n    1496.0 \n  \n  \n    SD \n    7 \n    38.6 \n    140.0 \n    4.8 \n    1421.2 \n  \n  \n    SD \n    8 \n    10.0 \n    132.2 \n    4.6 \n    1350.2 \n  \n\n\n\n\n\n\n\n\nBase costs per ha. by farm type and land use capability, x_{FL}, are in the input-costs.csv file:\n\n\nCode\ncosts &lt;- read.csv(str_glue(\"{base_dir}/costs.csv\"), header = TRUE)\ncosts |&gt; \n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    mean_or_sd \n    LUC \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Mean \n    1 \n    3500 \n    9500 \n    4000 \n    3000 \n  \n  \n    SD \n    1 \n    700 \n    1900 \n    800 \n    600 \n  \n  \n    Mean \n    2 \n    2650 \n    8050 \n    4000 \n    2850 \n  \n  \n    SD \n    2 \n    530 \n    1610 \n    800 \n    570 \n  \n  \n    Mean \n    3 \n    1625 \n    7350 \n    3850 \n    2675 \n  \n  \n    SD \n    3 \n    325 \n    1470 \n    770 \n    535 \n  \n  \n    Mean \n    4 \n    1450 \n    5500 \n    3700 \n    2500 \n  \n  \n    SD \n    4 \n    290 \n    1100 \n    740 \n    500 \n  \n  \n    Mean \n    5 \n    1110 \n    5200 \n    3550 \n    2400 \n  \n  \n    SD \n    5 \n    222 \n    1040 \n    710 \n    480 \n  \n  \n    Mean \n    6 \n    875 \n    5000 \n    3500 \n    2200 \n  \n  \n    SD \n    6 \n    175 \n    1000 \n    700 \n    440 \n  \n  \n    Mean \n    7 \n    810 \n    4000 \n    3375 \n    2100 \n  \n  \n    SD \n    7 \n    162 \n    800 \n    675 \n    420 \n  \n  \n    Mean \n    8 \n    125 \n    4000 \n    3250 \n    2000 \n  \n  \n    SD \n    8 \n    25 \n    800 \n    650 \n    400 \n  \n\n\n\n\n\n\n\n\nEmissions per ha. by farm type and land use capability, e_{FL}, are in the ghg_emissions.csv file:\n\n\nCode\nemissions &lt;- read.csv(str_glue(\"{base_dir}/ghg_emissions.csv\"), header = TRUE)\nemissions |&gt; \n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    mean_or_sd \n    LUC \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Mean \n    1 \n    4.0 \n    11.0 \n    -15.0 \n    1.2 \n  \n  \n    SD \n    1 \n    1.2 \n    3.3 \n    4.5 \n    0.4 \n  \n  \n    Mean \n    2 \n    3.8 \n    10.5 \n    -14.2 \n    1.1 \n  \n  \n    SD \n    2 \n    1.1 \n    3.1 \n    4.3 \n    0.3 \n  \n  \n    Mean \n    3 \n    3.5 \n    10.0 \n    -13.5 \n    1.1 \n  \n  \n    SD \n    3 \n    1.0 \n    3.0 \n    4.1 \n    0.3 \n  \n  \n    Mean \n    4 \n    3.2 \n    9.5 \n    -12.9 \n    1.0 \n  \n  \n    SD \n    4 \n    1.0 \n    2.9 \n    3.9 \n    0.3 \n  \n  \n    Mean \n    5 \n    3.0 \n    9.0 \n    -12.2 \n    1.0 \n  \n  \n    SD \n    5 \n    0.9 \n    2.7 \n    3.7 \n    0.3 \n  \n  \n    Mean \n    6 \n    2.8 \n    8.5 \n    -11.6 \n    0.9 \n  \n  \n    SD \n    6 \n    0.8 \n    2.5 \n    3.5 \n    0.3 \n  \n  \n    Mean \n    7 \n    2.5 \n    8.0 \n    -11.0 \n    0.9 \n  \n  \n    SD \n    7 \n    0.8 \n    2.4 \n    3.3 \n    0.3 \n  \n  \n    Mean \n    8 \n    2.2 \n    7.5 \n    -10.5 \n    0.8 \n  \n  \n    SD \n    8 \n    0.7 \n    2.2 \n    3.1 \n    0.3 \n  \n\n\n\n\n\n \nNote that all of yields, base costs, and emissions are stored as a mean and a standard deviation, and that each holding will see these numbers vary every model time period by drawing from a normal distribution.\nWe can use these data to show the profit, gross income, and total costs for each farm type across different land use capability classes. We’ll throw away the standard deviations for simplicity and consider only mean outcomes.\n\n\nCode\nprices &lt;- prices |&gt; \n  t() |&gt; \n  as.data.frame() |&gt; \n  tibble::rownames_to_column(\"farm_type\") |&gt;\n  mutate(carbon_tax = 10)\n\nyields &lt;- yields |&gt;\n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  filter(mean_or_sd == \"Mean\") |&gt; \n  select(-mean_or_sd) |&gt;\n  pivot_longer(-1) |&gt;\n  rename(farm_type = name, yield = value)\n\ncosts &lt;- costs |&gt;\n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  filter(mean_or_sd == \"Mean\") |&gt; \n  select(-mean_or_sd) |&gt;\n  pivot_longer(-1) |&gt;\n  rename(farm_type = name, cost = value)\n\nemissions &lt;- emissions |&gt;\n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  filter(mean_or_sd == \"Mean\") |&gt; \n  select(-mean_or_sd) |&gt;\n  pivot_longer(-1) |&gt;\n  rename(farm_type = name, emissions = value)\n\ncombined_data &lt;- prices |&gt;\n  left_join(yields) |&gt;\n  left_join(costs) |&gt;\n  left_join(emissions) |&gt;\n  mutate(gross_income = price * yield, # LUC = as.factor(LUC),\n         total_costs = cost + carbon_tax * emissions, base_costs = cost,\n         profit = gross_income - total_costs) |&gt;\n  select(farm_type, LUC, profit, price, yield, gross_income, base_costs,\n         emissions, carbon_tax, total_costs) |&gt;\n  rename(Profit = profit, `Gross income` = gross_income, `Total costs` = total_costs)\n\ncombined_data |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    farm_type \n    LUC \n    Profit \n    price \n    yield \n    Gross income \n    base_costs \n    emissions \n    carbon_tax \n    Total costs \n  \n \n\n  \n    SNB \n    1 \n    302.50 \n    5.0 \n    768.5 \n    3842.50 \n    3500 \n    4.0 \n    10 \n    3540 \n  \n  \n    SNB \n    2 \n    218.00 \n    5.0 \n    581.2 \n    2906.00 \n    2650 \n    3.8 \n    10 \n    2688 \n  \n  \n    SNB \n    3 \n    202.00 \n    5.0 \n    372.4 \n    1862.00 \n    1625 \n    3.5 \n    10 \n    1660 \n  \n  \n    SNB \n    4 \n    179.00 \n    5.0 \n    332.2 \n    1661.00 \n    1450 \n    3.2 \n    10 \n    1482 \n  \n  \n    SNB \n    5 \n    157.50 \n    5.0 \n    259.5 \n    1297.50 \n    1110 \n    3.0 \n    10 \n    1140 \n  \n  \n    SNB \n    6 \n    134.00 \n    5.0 \n    207.4 \n    1037.00 \n    875 \n    2.8 \n    10 \n    903 \n  \n  \n    SNB \n    7 \n    131.00 \n    5.0 \n    193.2 \n    966.00 \n    810 \n    2.5 \n    10 \n    835 \n  \n  \n    SNB \n    8 \n    102.50 \n    5.0 \n    49.9 \n    249.50 \n    125 \n    2.2 \n    10 \n    147 \n  \n  \n    Dairy \n    1 \n    1662.50 \n    7.5 \n    1503.0 \n    11272.50 \n    9500 \n    11.0 \n    10 \n    9610 \n  \n  \n    Dairy \n    2 \n    1467.50 \n    7.5 \n    1283.0 \n    9622.50 \n    8050 \n    10.5 \n    10 \n    8155 \n  \n  \n    Dairy \n    3 \n    1357.25 \n    7.5 \n    1174.3 \n    8807.25 \n    7350 \n    10.0 \n    10 \n    7450 \n  \n  \n    Dairy \n    4 \n    1330.50 \n    7.5 \n    923.4 \n    6925.50 \n    5500 \n    9.5 \n    10 \n    5595 \n  \n  \n    Dairy \n    5 \n    1292.75 \n    7.5 \n    877.7 \n    6582.75 \n    5200 \n    9.0 \n    10 \n    5290 \n  \n  \n    Dairy \n    6 \n    1258.50 \n    7.5 \n    845.8 \n    6343.50 \n    5000 \n    8.5 \n    10 \n    5085 \n  \n  \n    Dairy \n    7 \n    1170.00 \n    7.5 \n    700.0 \n    5250.00 \n    4000 \n    8.0 \n    10 \n    4080 \n  \n  \n    Dairy \n    8 \n    882.50 \n    7.5 \n    661.0 \n    4957.50 \n    4000 \n    7.5 \n    10 \n    4075 \n  \n  \n    Forest \n    1 \n    860.00 \n    157.0 \n    30.0 \n    4710.00 \n    4000 \n    -15.0 \n    10 \n    3850 \n  \n  \n    Forest \n    2 \n    695.00 \n    157.0 \n    29.0 \n    4553.00 \n    4000 \n    -14.2 \n    10 \n    3858 \n  \n  \n    Forest \n    3 \n    681.00 \n    157.0 \n    28.0 \n    4396.00 \n    3850 \n    -13.5 \n    10 \n    3715 \n  \n  \n    Forest \n    4 \n    668.00 \n    157.0 \n    27.0 \n    4239.00 \n    3700 \n    -12.9 \n    10 \n    3571 \n  \n  \n    Forest \n    5 \n    654.00 \n    157.0 \n    26.0 \n    4082.00 \n    3550 \n    -12.2 \n    10 \n    3428 \n  \n  \n    Forest \n    6 \n    541.00 \n    157.0 \n    25.0 \n    3925.00 \n    3500 \n    -11.6 \n    10 \n    3384 \n  \n  \n    Forest \n    7 \n    503.00 \n    157.0 \n    24.0 \n    3768.00 \n    3375 \n    -11.0 \n    10 \n    3265 \n  \n  \n    Forest \n    8 \n    466.00 \n    157.0 \n    23.0 \n    3611.00 \n    3250 \n    -10.5 \n    10 \n    3145 \n  \n  \n    Crop \n    1 \n    1821.50 \n    0.5 \n    9667.0 \n    4833.50 \n    3000 \n    1.2 \n    10 \n    3012 \n  \n  \n    Crop \n    2 \n    1730.80 \n    0.5 \n    9183.6 \n    4591.80 \n    2850 \n    1.1 \n    10 \n    2861 \n  \n  \n    Crop \n    3 \n    1676.25 \n    0.5 \n    8724.5 \n    4362.25 \n    2675 \n    1.1 \n    10 \n    2686 \n  \n  \n    Crop \n    4 \n    1634.10 \n    0.5 \n    8288.2 \n    4144.10 \n    2500 \n    1.0 \n    10 \n    2510 \n  \n  \n    Crop \n    5 \n    1526.90 \n    0.5 \n    7873.8 \n    3936.90 \n    2400 \n    1.0 \n    10 \n    2410 \n  \n  \n    Crop \n    6 \n    1531.05 \n    0.5 \n    7480.1 \n    3740.05 \n    2200 \n    0.9 \n    10 \n    2209 \n  \n  \n    Crop \n    7 \n    1444.05 \n    0.5 \n    7106.1 \n    3553.05 \n    2100 \n    0.9 \n    10 \n    2109 \n  \n  \n    Crop \n    8 \n    1367.40 \n    0.5 \n    6750.8 \n    3375.40 \n    2000 \n    0.8 \n    10 \n    2008 \n  \n\n\n\n\n\n\n\n\n\nBelow are shown the income, costs, and net revenue per hectare for each farm type across the eight land use capability classes. These are crude estimates dating back to the ARLUNZ model1 and will be updated in due course. Even so it is expected that the relative profitability of the different broad land use classes will remain similar.\n\n\nCode\nplot_data &lt;- combined_data |&gt; \n  pivot_longer(cols = c(\"Gross income\", \"Profit\", \"Total costs\"))\n\nggplot(plot_data |&gt; filter(name %in% c(\"Gross income\", \"Total costs\"))) +\n  geom_col(aes(x = as.factor(LUC), y = value, group = name, fill = name),\n           position = \"dodge\") + \n  scale_fill_manual(values = c(\"#999999\", \"#ff6666\"), name = \"Income vs. Costs\") +\n  geom_point(data = plot_data |&gt; filter(name == \"Profit\"), \n            aes(x = LUC, y = value, shape = name), size = 7) +\n  scale_shape_manual(values = \"\\u2014\", name = \"\") + # \\u2014 is an em-dash\n  xlab(\"Landuse Capability (LUC)\") +\n  ylab(\"Profit, $ per ha.\") +\n  facet_wrap(~ farm_type) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2024-07-02\nInitial post.\n\n\n2024-07-03\nAdded bar chart of farm income/costs estimates.\n\n\n2024-07-04\nAdded detail on calculation of relative change noting that profit can’t be handled this way because it is \\pm and relative change is meaningless for such variables.\n\n\n2024-07-05\nCorrected relative change from a percentage to a proportion.\n\n\n2024-07-28\nCorrection in equation summarising full calculation of profit. Added note to consider the nudge calculation’s possible bias favouring changes after bad years.\n\n\n2025-02-19\nSplit out from previous ‘core loop’ document.\n\n\n2025-10-17\nCorrected code to cope with new formatting of various datasets.",
    "crumbs": [
      "Documents",
      "Calculation of holding income"
    ]
  },
  {
    "objectID": "model-description/documents/02-calculation-of-holding-income.html#baseline-income-equation-for-holdings",
    "href": "model-description/documents/02-calculation-of-holding-income.html#baseline-income-equation-for-holdings",
    "title": "Calculation of holding income",
    "section": "",
    "text": "The baseline profit Z of each hectare of a holding is given by\nZ=Y-X\nwhere Y is gross income, and X is total costs. These are in turn given by\n\n\\begin{array}{rcl}\nY &=& pq \\\\\nX &=& x+te\n\\end{array}\n\nwhere\n\np is the price obtained per unit,\nq is the quantity produced per hectare,\nx is the cost per hectare to operate,\ne_i are various environmental metrics per hectare, most obviously greenhouse gas emissions, and\nt_i are any environmental taxes associated with each environmental metric.\n\nEach of these parameters may depend on the farm type F and the land use capability (LUC), L, such that the full calculation of profit for each hectare of a holding is \nZ_{FL} = p_Fq_{FL} - x_{FL} - \\sum_i t_ie_{i,FL}\n and total holding profit is obtaining by summing this quantity across all hectares of the holding. Overall profit of a farm is determined by summation across all its constituent holdings. Note that while currently all cells in a holding have the same LUC this is not a requirement and the calculation will work equally well if LUC were to vary across a holding.\n\n\nThe parameter values are stored in a number of CSV files which are read in by the model at start up from the .data/market/&lt;scenario&gt; folder specified.\n\n\np_F is found in the prices.csv file:\n\n\nCode\nprices &lt;- read.csv(str_glue(\"{base_dir}/prices.csv\"), \n                   header = T, row.names = 1) |&gt; \n  slice(1:2) # only rows 1 & 2 relevant\nprices |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F)\n\n\n\n \n  \n     \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    price \n    5 \n    7.5 \n    157 \n    0.5 \n  \n\n\n\n\n\nEnvironmental taxes t_i are found in the environmental-metrics.csv file in the price column. In the example below the tax associated with greenhouse gas emissions is $10 per unit per ha and no tax is levied on nitrates. Other possible metrics are excluded from consideration by the file shown as they are ‘commented out’ with the # prefix.\n\n\nCode\nprint(read.csv(str_glue(\"{base_dir}/environmental-metrics.csv\"), header = T, row.names = 1))\n\n\n              limit price\nghg_emissions    10    10\nnitrates         11     0\nsediment         10     0\nphosphates        1     0\ne_coli            4     0\n\n\nIn the remainder of this page we assume only greenhouse gases are taxed and use the simplified form te for the environmental tax burden in preference to the more complete \\sum_i t_ie_{i,FL} shown above.\n\n\n\nYields by farm type and land use capability, q_{FL}, are in the commodity-yields.csv file:\n\n\nCode\nyields &lt;- read.csv(str_glue(\"{base_dir}/yields.csv\"), header = T)\nyields |&gt; \n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    mean_or_sd \n    LUC \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Mean \n    1 \n    768.5 \n    1503.0 \n    30.0 \n    9667.0 \n  \n  \n    Mean \n    2 \n    581.2 \n    1283.0 \n    29.0 \n    9183.6 \n  \n  \n    Mean \n    3 \n    372.4 \n    1174.3 \n    28.0 \n    8724.5 \n  \n  \n    Mean \n    4 \n    332.2 \n    923.4 \n    27.0 \n    8288.2 \n  \n  \n    Mean \n    5 \n    259.5 \n    877.7 \n    26.0 \n    7873.8 \n  \n  \n    Mean \n    6 \n    207.4 \n    845.8 \n    25.0 \n    7480.1 \n  \n  \n    Mean \n    7 \n    193.2 \n    700.0 \n    24.0 \n    7106.1 \n  \n  \n    Mean \n    8 \n    49.9 \n    661.0 \n    23.0 \n    6750.8 \n  \n  \n    SD \n    1 \n    153.7 \n    300.6 \n    6.0 \n    1933.4 \n  \n  \n    SD \n    2 \n    116.2 \n    256.6 \n    5.8 \n    1836.7 \n  \n  \n    SD \n    3 \n    74.5 \n    234.9 \n    5.6 \n    1744.9 \n  \n  \n    SD \n    4 \n    66.4 \n    184.7 \n    5.4 \n    1657.6 \n  \n  \n    SD \n    5 \n    51.9 \n    175.5 \n    5.2 \n    1574.8 \n  \n  \n    SD \n    6 \n    41.5 \n    169.2 \n    5.0 \n    1496.0 \n  \n  \n    SD \n    7 \n    38.6 \n    140.0 \n    4.8 \n    1421.2 \n  \n  \n    SD \n    8 \n    10.0 \n    132.2 \n    4.6 \n    1350.2 \n  \n\n\n\n\n\n\n\n\nBase costs per ha. by farm type and land use capability, x_{FL}, are in the input-costs.csv file:\n\n\nCode\ncosts &lt;- read.csv(str_glue(\"{base_dir}/costs.csv\"), header = TRUE)\ncosts |&gt; \n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    mean_or_sd \n    LUC \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Mean \n    1 \n    3500 \n    9500 \n    4000 \n    3000 \n  \n  \n    SD \n    1 \n    700 \n    1900 \n    800 \n    600 \n  \n  \n    Mean \n    2 \n    2650 \n    8050 \n    4000 \n    2850 \n  \n  \n    SD \n    2 \n    530 \n    1610 \n    800 \n    570 \n  \n  \n    Mean \n    3 \n    1625 \n    7350 \n    3850 \n    2675 \n  \n  \n    SD \n    3 \n    325 \n    1470 \n    770 \n    535 \n  \n  \n    Mean \n    4 \n    1450 \n    5500 \n    3700 \n    2500 \n  \n  \n    SD \n    4 \n    290 \n    1100 \n    740 \n    500 \n  \n  \n    Mean \n    5 \n    1110 \n    5200 \n    3550 \n    2400 \n  \n  \n    SD \n    5 \n    222 \n    1040 \n    710 \n    480 \n  \n  \n    Mean \n    6 \n    875 \n    5000 \n    3500 \n    2200 \n  \n  \n    SD \n    6 \n    175 \n    1000 \n    700 \n    440 \n  \n  \n    Mean \n    7 \n    810 \n    4000 \n    3375 \n    2100 \n  \n  \n    SD \n    7 \n    162 \n    800 \n    675 \n    420 \n  \n  \n    Mean \n    8 \n    125 \n    4000 \n    3250 \n    2000 \n  \n  \n    SD \n    8 \n    25 \n    800 \n    650 \n    400 \n  \n\n\n\n\n\n\n\n\nEmissions per ha. by farm type and land use capability, e_{FL}, are in the ghg_emissions.csv file:\n\n\nCode\nemissions &lt;- read.csv(str_glue(\"{base_dir}/ghg_emissions.csv\"), header = TRUE)\nemissions |&gt; \n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    mean_or_sd \n    LUC \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Mean \n    1 \n    4.0 \n    11.0 \n    -15.0 \n    1.2 \n  \n  \n    SD \n    1 \n    1.2 \n    3.3 \n    4.5 \n    0.4 \n  \n  \n    Mean \n    2 \n    3.8 \n    10.5 \n    -14.2 \n    1.1 \n  \n  \n    SD \n    2 \n    1.1 \n    3.1 \n    4.3 \n    0.3 \n  \n  \n    Mean \n    3 \n    3.5 \n    10.0 \n    -13.5 \n    1.1 \n  \n  \n    SD \n    3 \n    1.0 \n    3.0 \n    4.1 \n    0.3 \n  \n  \n    Mean \n    4 \n    3.2 \n    9.5 \n    -12.9 \n    1.0 \n  \n  \n    SD \n    4 \n    1.0 \n    2.9 \n    3.9 \n    0.3 \n  \n  \n    Mean \n    5 \n    3.0 \n    9.0 \n    -12.2 \n    1.0 \n  \n  \n    SD \n    5 \n    0.9 \n    2.7 \n    3.7 \n    0.3 \n  \n  \n    Mean \n    6 \n    2.8 \n    8.5 \n    -11.6 \n    0.9 \n  \n  \n    SD \n    6 \n    0.8 \n    2.5 \n    3.5 \n    0.3 \n  \n  \n    Mean \n    7 \n    2.5 \n    8.0 \n    -11.0 \n    0.9 \n  \n  \n    SD \n    7 \n    0.8 \n    2.4 \n    3.3 \n    0.3 \n  \n  \n    Mean \n    8 \n    2.2 \n    7.5 \n    -10.5 \n    0.8 \n  \n  \n    SD \n    8 \n    0.7 \n    2.2 \n    3.1 \n    0.3 \n  \n\n\n\n\n\n \nNote that all of yields, base costs, and emissions are stored as a mean and a standard deviation, and that each holding will see these numbers vary every model time period by drawing from a normal distribution.\nWe can use these data to show the profit, gross income, and total costs for each farm type across different land use capability classes. We’ll throw away the standard deviations for simplicity and consider only mean outcomes.\n\n\nCode\nprices &lt;- prices |&gt; \n  t() |&gt; \n  as.data.frame() |&gt; \n  tibble::rownames_to_column(\"farm_type\") |&gt;\n  mutate(carbon_tax = 10)\n\nyields &lt;- yields |&gt;\n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  filter(mean_or_sd == \"Mean\") |&gt; \n  select(-mean_or_sd) |&gt;\n  pivot_longer(-1) |&gt;\n  rename(farm_type = name, yield = value)\n\ncosts &lt;- costs |&gt;\n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  filter(mean_or_sd == \"Mean\") |&gt; \n  select(-mean_or_sd) |&gt;\n  pivot_longer(-1) |&gt;\n  rename(farm_type = name, cost = value)\n\nemissions &lt;- emissions |&gt;\n  mutate(across(3:6, ~ round(., 1))) |&gt;\n  filter(mean_or_sd == \"Mean\") |&gt; \n  select(-mean_or_sd) |&gt;\n  pivot_longer(-1) |&gt;\n  rename(farm_type = name, emissions = value)\n\ncombined_data &lt;- prices |&gt;\n  left_join(yields) |&gt;\n  left_join(costs) |&gt;\n  left_join(emissions) |&gt;\n  mutate(gross_income = price * yield, # LUC = as.factor(LUC),\n         total_costs = cost + carbon_tax * emissions, base_costs = cost,\n         profit = gross_income - total_costs) |&gt;\n  select(farm_type, LUC, profit, price, yield, gross_income, base_costs,\n         emissions, carbon_tax, total_costs) |&gt;\n  rename(Profit = profit, `Gross income` = gross_income, `Total costs` = total_costs)\n\ncombined_data |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    farm_type \n    LUC \n    Profit \n    price \n    yield \n    Gross income \n    base_costs \n    emissions \n    carbon_tax \n    Total costs \n  \n \n\n  \n    SNB \n    1 \n    302.50 \n    5.0 \n    768.5 \n    3842.50 \n    3500 \n    4.0 \n    10 \n    3540 \n  \n  \n    SNB \n    2 \n    218.00 \n    5.0 \n    581.2 \n    2906.00 \n    2650 \n    3.8 \n    10 \n    2688 \n  \n  \n    SNB \n    3 \n    202.00 \n    5.0 \n    372.4 \n    1862.00 \n    1625 \n    3.5 \n    10 \n    1660 \n  \n  \n    SNB \n    4 \n    179.00 \n    5.0 \n    332.2 \n    1661.00 \n    1450 \n    3.2 \n    10 \n    1482 \n  \n  \n    SNB \n    5 \n    157.50 \n    5.0 \n    259.5 \n    1297.50 \n    1110 \n    3.0 \n    10 \n    1140 \n  \n  \n    SNB \n    6 \n    134.00 \n    5.0 \n    207.4 \n    1037.00 \n    875 \n    2.8 \n    10 \n    903 \n  \n  \n    SNB \n    7 \n    131.00 \n    5.0 \n    193.2 \n    966.00 \n    810 \n    2.5 \n    10 \n    835 \n  \n  \n    SNB \n    8 \n    102.50 \n    5.0 \n    49.9 \n    249.50 \n    125 \n    2.2 \n    10 \n    147 \n  \n  \n    Dairy \n    1 \n    1662.50 \n    7.5 \n    1503.0 \n    11272.50 \n    9500 \n    11.0 \n    10 \n    9610 \n  \n  \n    Dairy \n    2 \n    1467.50 \n    7.5 \n    1283.0 \n    9622.50 \n    8050 \n    10.5 \n    10 \n    8155 \n  \n  \n    Dairy \n    3 \n    1357.25 \n    7.5 \n    1174.3 \n    8807.25 \n    7350 \n    10.0 \n    10 \n    7450 \n  \n  \n    Dairy \n    4 \n    1330.50 \n    7.5 \n    923.4 \n    6925.50 \n    5500 \n    9.5 \n    10 \n    5595 \n  \n  \n    Dairy \n    5 \n    1292.75 \n    7.5 \n    877.7 \n    6582.75 \n    5200 \n    9.0 \n    10 \n    5290 \n  \n  \n    Dairy \n    6 \n    1258.50 \n    7.5 \n    845.8 \n    6343.50 \n    5000 \n    8.5 \n    10 \n    5085 \n  \n  \n    Dairy \n    7 \n    1170.00 \n    7.5 \n    700.0 \n    5250.00 \n    4000 \n    8.0 \n    10 \n    4080 \n  \n  \n    Dairy \n    8 \n    882.50 \n    7.5 \n    661.0 \n    4957.50 \n    4000 \n    7.5 \n    10 \n    4075 \n  \n  \n    Forest \n    1 \n    860.00 \n    157.0 \n    30.0 \n    4710.00 \n    4000 \n    -15.0 \n    10 \n    3850 \n  \n  \n    Forest \n    2 \n    695.00 \n    157.0 \n    29.0 \n    4553.00 \n    4000 \n    -14.2 \n    10 \n    3858 \n  \n  \n    Forest \n    3 \n    681.00 \n    157.0 \n    28.0 \n    4396.00 \n    3850 \n    -13.5 \n    10 \n    3715 \n  \n  \n    Forest \n    4 \n    668.00 \n    157.0 \n    27.0 \n    4239.00 \n    3700 \n    -12.9 \n    10 \n    3571 \n  \n  \n    Forest \n    5 \n    654.00 \n    157.0 \n    26.0 \n    4082.00 \n    3550 \n    -12.2 \n    10 \n    3428 \n  \n  \n    Forest \n    6 \n    541.00 \n    157.0 \n    25.0 \n    3925.00 \n    3500 \n    -11.6 \n    10 \n    3384 \n  \n  \n    Forest \n    7 \n    503.00 \n    157.0 \n    24.0 \n    3768.00 \n    3375 \n    -11.0 \n    10 \n    3265 \n  \n  \n    Forest \n    8 \n    466.00 \n    157.0 \n    23.0 \n    3611.00 \n    3250 \n    -10.5 \n    10 \n    3145 \n  \n  \n    Crop \n    1 \n    1821.50 \n    0.5 \n    9667.0 \n    4833.50 \n    3000 \n    1.2 \n    10 \n    3012 \n  \n  \n    Crop \n    2 \n    1730.80 \n    0.5 \n    9183.6 \n    4591.80 \n    2850 \n    1.1 \n    10 \n    2861 \n  \n  \n    Crop \n    3 \n    1676.25 \n    0.5 \n    8724.5 \n    4362.25 \n    2675 \n    1.1 \n    10 \n    2686 \n  \n  \n    Crop \n    4 \n    1634.10 \n    0.5 \n    8288.2 \n    4144.10 \n    2500 \n    1.0 \n    10 \n    2510 \n  \n  \n    Crop \n    5 \n    1526.90 \n    0.5 \n    7873.8 \n    3936.90 \n    2400 \n    1.0 \n    10 \n    2410 \n  \n  \n    Crop \n    6 \n    1531.05 \n    0.5 \n    7480.1 \n    3740.05 \n    2200 \n    0.9 \n    10 \n    2209 \n  \n  \n    Crop \n    7 \n    1444.05 \n    0.5 \n    7106.1 \n    3553.05 \n    2100 \n    0.9 \n    10 \n    2109 \n  \n  \n    Crop \n    8 \n    1367.40 \n    0.5 \n    6750.8 \n    3375.40 \n    2000 \n    0.8 \n    10 \n    2008 \n  \n\n\n\n\n\n\n\n\n\nBelow are shown the income, costs, and net revenue per hectare for each farm type across the eight land use capability classes. These are crude estimates dating back to the ARLUNZ model1 and will be updated in due course. Even so it is expected that the relative profitability of the different broad land use classes will remain similar.\n\n\nCode\nplot_data &lt;- combined_data |&gt; \n  pivot_longer(cols = c(\"Gross income\", \"Profit\", \"Total costs\"))\n\nggplot(plot_data |&gt; filter(name %in% c(\"Gross income\", \"Total costs\"))) +\n  geom_col(aes(x = as.factor(LUC), y = value, group = name, fill = name),\n           position = \"dodge\") + \n  scale_fill_manual(values = c(\"#999999\", \"#ff6666\"), name = \"Income vs. Costs\") +\n  geom_point(data = plot_data |&gt; filter(name == \"Profit\"), \n            aes(x = LUC, y = value, shape = name), size = 7) +\n  scale_shape_manual(values = \"\\u2014\", name = \"\") + # \\u2014 is an em-dash\n  xlab(\"Landuse Capability (LUC)\") +\n  ylab(\"Profit, $ per ha.\") +\n  facet_wrap(~ farm_type) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2024-07-02\nInitial post.\n\n\n2024-07-03\nAdded bar chart of farm income/costs estimates.\n\n\n2024-07-04\nAdded detail on calculation of relative change noting that profit can’t be handled this way because it is \\pm and relative change is meaningless for such variables.\n\n\n2024-07-05\nCorrected relative change from a percentage to a proportion.\n\n\n2024-07-28\nCorrection in equation summarising full calculation of profit. Added note to consider the nudge calculation’s possible bias favouring changes after bad years.\n\n\n2025-02-19\nSplit out from previous ‘core loop’ document.\n\n\n2025-10-17\nCorrected code to cope with new formatting of various datasets.",
    "crumbs": [
      "Documents",
      "Calculation of holding income"
    ]
  },
  {
    "objectID": "model-description/documents/02-calculation-of-holding-income.html#footnotes",
    "href": "model-description/documents/02-calculation-of-holding-income.html#footnotes",
    "title": "Calculation of holding income",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSee: Morgan FJ and AJ Daigneault. 2015. Estimating Impacts of Climate Change Policy on Land Use: An Agent-Based Modelling Approach. PLOS ONE 10(5): e0127317.↩︎",
    "crumbs": [
      "Documents",
      "Calculation of holding income"
    ]
  },
  {
    "objectID": "model-description/documents/00-overall-model-structure.html",
    "href": "model-description/documents/00-overall-model-structure.html",
    "title": "Overall model structure",
    "section": "",
    "text": "The easiest place to start is with an overview of what the model looks like. At time of writing (mid-October 2025) the GUI appears as below (click on the image for a closer look):\n\n\n\nControls on the left-hand side are primarily starting and running the model and controlling display of visual elements.\n\n\n\nThe map area shows land use capability (LUC; more intense colours are better land) and land use according to the following key:\n\nGreens Forest\nBlues Dairy\nOranges Sheep and beef (SNB)\nMagentas Crops\n\nFarms are delineated in black and their current profit is shown by a circle scaled by the level of profit. If ‘in the black’ the circle is coloured to match dominant land use on the farm. If the farm is losing money (‘in the red’) the circle is coloured red. If profit is zero then the circle is replaced with a small ‘x’. This happens when an indebted farm has to apply all of gross profits to servicing debt.\nHoldings are delineated in grey and shown by squares scaled and coloured in the same way as farms.\nFarmers are shown as ‘person’ icons, with no additional information symbolised.\n\n\n\nControls immediately to the right of the map area mostly affect model initialisation, in particular (i) allowing choice between a random map, or initialisation from GIS data (shown above), and (ii) allowing for initialisation from controlled :random number seeds to allow for repeatability of results and exploration of the details of any findings. For GIS initialisation a region is chosen from a drop-down list. For initialisation of ‘market’ settings a scenario is chosen from a drop-down list. More details on the requirements for these options are provided elsewhere in the documentation.\nOne other important setting is controlled by a ‘slider’: sigmoid-slope controls the rate of change of probabilities of adoption of intervention in response to push and pull factors. This is uncalibrated at present. A potential extension of the model would allow different levels of this control for different ‘nudge’ or market effects.\n\n\n\nThe column of controls on the right of the model provides some tracking plots (overall income and costs, overall land on which different interventions have been adopted, overall land in different land uses, aggregate environmental impacts, age and debt profiles of famrs), and also some high level controls as follows:\n\nlanduse-change-on-succession?: If On when a farmer is succeeded by a new entrant the new farmer considers a change in (all of farm) land use if any of the farm’s holdings are losing money.\nprioritise-forestry?: If On when a holding is unprofitable only forestry is considered as new land use; other land uses are also considered if this option is Off.\napply-severity-of-losses?: If On losses occurring across more of the farm (by area) make whole of farm conversion of land use less unlikely.\napply-suitability?: If On suitability of LUC of holdings is taken into account when land use change is undertaken; if Off land use change disregards LUC.\ninclude-debt? and interest-rate: If include-debt? is On then farm debt accrues and has various impacts on farmer behaviour.\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.\n\n\n2025-08-05\nOriginal page broken out into 3 - overview, elements, files.",
    "crumbs": [
      "Documents",
      "Overall model structure"
    ]
  },
  {
    "objectID": "model-description/documents/00-overall-model-structure.html#the-model-interface",
    "href": "model-description/documents/00-overall-model-structure.html#the-model-interface",
    "title": "Overall model structure",
    "section": "",
    "text": "The easiest place to start is with an overview of what the model looks like. At time of writing (mid-October 2025) the GUI appears as below (click on the image for a closer look):\n\n\n\nControls on the left-hand side are primarily starting and running the model and controlling display of visual elements.\n\n\n\nThe map area shows land use capability (LUC; more intense colours are better land) and land use according to the following key:\n\nGreens Forest\nBlues Dairy\nOranges Sheep and beef (SNB)\nMagentas Crops\n\nFarms are delineated in black and their current profit is shown by a circle scaled by the level of profit. If ‘in the black’ the circle is coloured to match dominant land use on the farm. If the farm is losing money (‘in the red’) the circle is coloured red. If profit is zero then the circle is replaced with a small ‘x’. This happens when an indebted farm has to apply all of gross profits to servicing debt.\nHoldings are delineated in grey and shown by squares scaled and coloured in the same way as farms.\nFarmers are shown as ‘person’ icons, with no additional information symbolised.\n\n\n\nControls immediately to the right of the map area mostly affect model initialisation, in particular (i) allowing choice between a random map, or initialisation from GIS data (shown above), and (ii) allowing for initialisation from controlled :random number seeds to allow for repeatability of results and exploration of the details of any findings. For GIS initialisation a region is chosen from a drop-down list. For initialisation of ‘market’ settings a scenario is chosen from a drop-down list. More details on the requirements for these options are provided elsewhere in the documentation.\nOne other important setting is controlled by a ‘slider’: sigmoid-slope controls the rate of change of probabilities of adoption of intervention in response to push and pull factors. This is uncalibrated at present. A potential extension of the model would allow different levels of this control for different ‘nudge’ or market effects.\n\n\n\nThe column of controls on the right of the model provides some tracking plots (overall income and costs, overall land on which different interventions have been adopted, overall land in different land uses, aggregate environmental impacts, age and debt profiles of famrs), and also some high level controls as follows:\n\nlanduse-change-on-succession?: If On when a farmer is succeeded by a new entrant the new farmer considers a change in (all of farm) land use if any of the farm’s holdings are losing money.\nprioritise-forestry?: If On when a holding is unprofitable only forestry is considered as new land use; other land uses are also considered if this option is Off.\napply-severity-of-losses?: If On losses occurring across more of the farm (by area) make whole of farm conversion of land use less unlikely.\napply-suitability?: If On suitability of LUC of holdings is taken into account when land use change is undertaken; if Off land use change disregards LUC.\ninclude-debt? and interest-rate: If include-debt? is On then farm debt accrues and has various impacts on farmer behaviour.\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.\n\n\n2025-08-05\nOriginal page broken out into 3 - overview, elements, files.",
    "crumbs": [
      "Documents",
      "Overall model structure"
    ]
  },
  {
    "objectID": "model-description/documents/01b-model-main-loop.html",
    "href": "model-description/documents/01b-model-main-loop.html",
    "title": "Model main loop",
    "section": "",
    "text": "The model steps through the sequence shown below each model ‘tick’.\nMore details of procedures in red are set out in documents linked from those boxes in the flow chart.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[&lt;span style='color:red;'&gt;Age farmers and&lt;br&gt;replace any that exit&lt;/span&gt;]\n  C[&lt;span style='color:red;'&gt;Update income, costs, and&lt;br&gt;profit of holdings and farms&lt;/span&gt;]\n  E[&lt;span style='color:red;'&gt;Farmer decision making&lt;/span&gt;]\n  T[Update map and plots]\n  Z((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt; E\n  E --&gt; T\n  T --&gt; Z\n  click B \"01c-farmer-aging-and-succession.html\" \"Click for details\"\n  click C \"02-calculation-of-holding-income.html\" \"Click for details\"\n  click E \"03-farmer-decisions-general.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Model main loop"
    ]
  },
  {
    "objectID": "model-description/documents/01b-model-main-loop.html#model-main-loop",
    "href": "model-description/documents/01b-model-main-loop.html#model-main-loop",
    "title": "Model main loop",
    "section": "",
    "text": "The model steps through the sequence shown below each model ‘tick’.\nMore details of procedures in red are set out in documents linked from those boxes in the flow chart.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[&lt;span style='color:red;'&gt;Age farmers and&lt;br&gt;replace any that exit&lt;/span&gt;]\n  C[&lt;span style='color:red;'&gt;Update income, costs, and&lt;br&gt;profit of holdings and farms&lt;/span&gt;]\n  E[&lt;span style='color:red;'&gt;Farmer decision making&lt;/span&gt;]\n  T[Update map and plots]\n  Z((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt; E\n  E --&gt; T\n  T --&gt; Z\n  click B \"01c-farmer-aging-and-succession.html\" \"Click for details\"\n  click C \"02-calculation-of-holding-income.html\" \"Click for details\"\n  click E \"03-farmer-decisions-general.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Model main loop"
    ]
  },
  {
    "objectID": "model-description/documents/04-farmer-decisions-land-use.html",
    "href": "model-description/documents/04-farmer-decisions-land-use.html",
    "title": "Farmer decisions about land use",
    "section": "",
    "text": "The decision sequence followed by farmers each time step is shown below.\n\n\n\n\n\nflowchart TB\n  A((START))\n  F{Any&lt;br&gt;loss-making&lt;br&gt;holdings?}\n  G[\"&lt;span style='font-family:monospace'&gt;options&lt;/span&gt; &larr; {}\"]\n  H{Farm&lt;br&gt;losing money&lt;br&gt;overall?}\n  I[Add possible&lt;br&gt;all of farm land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  J[Add possible&lt;br&gt;per holding land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  K[Choose among choices&lt;br&gt;in  &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  L[&lt;span style='color:red;'&gt;Consider&lt;br&gt;interventions&lt;/span&gt;]\n  N{More&lt;br&gt;farmers?}\n  Z((END))\n  A --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| L\n  subgraph \"Consider land use\"\n  G --&gt; H\n  H --&gt;|Y| I\n  H --&gt;|N| J\n  I --&gt; J\n  J --&gt; K\n  end\n  K --&gt; N\n  L --&gt; N\n  N --&gt;|Y| F\n  N --&gt;|N| Z\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\nConsideration of land use change occurs if any holdings on the farm are loss-making. Consideration of land use change precludes making any management interventions this model time step, regardless of whether or not land use changes are made. Because most interventions reduce profitability this can be understood as a response to tough times: if some parts of a farm are loss-making then it is unlikely a farmer will respond by making costly changes anywhere on the farm.\nOnce the ‘Consider land use’ sequence is entered, the next decision point is to ask if the farm is losing money in aggregate (i.e., summed across all holdings). If so, then whole-farm land use change is added to the list of possibilities. If not this option is ignored, and only single holding land use change on the loss-making holdings are added to the list of possibilities.\nThe list of possible land use changes is a series of triples\n[affected-holdings, new-land-use, probability]\nThe whole-farm land use change options will list all holdings in the current land use as affected-holdings.\nOne of these options is randomly drawn with relative probability given by its probability, and then it is implemented with that probability. This means that if all the options are low probability then any of them might be drawn, but it remains unlikely to be implemented. If one option has a higher probability than the others it is more likely to be drawn, but if its probability is low, it is still unlikely to happen. (A similar procedure is followed for management interventions under consideration, see this explanation.)\nProbabilities are calculated based on the values in the ./data/market/&lt;scenario&gt;/conversion-probabilities.csv file. For non-succession triggered whole-farm conversions the probability of conversion may be optionally ‘down-weighted’ by the proportion of the land area of the farm that is losing money.\nImportant changes to this procedure that should be considered are the impact of policy settings, farmer dispositions, the effect of recent changes on similar farms, and the relative profitability of different land uses. Policy settings and land use profitability can probably be folded into the conversion probabilities of a scenario, but farmer disposition and peer-farmer behaviours would required additional code.\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer decisions about land use"
    ]
  },
  {
    "objectID": "model-description/documents/05-farmer-decisions-interventions.html",
    "href": "model-description/documents/05-farmer-decisions-interventions.html",
    "title": "Farmer decisions about management interventions",
    "section": "",
    "text": "As shown below if no holdings on the farm are loss-making, then a farmer will consider adopting one or more of the available interventions on various holdings.\nflowchart TB\n  A((START))\n  F{Any&lt;br&gt;loss-making&lt;br&gt;holdings?}\n  G[&lt;span style='color:red;'&gt;Consider land&lt;br&gt;use change&lt;/span&gt;]\n  L[Compile list of&lt;br&gt;possible interventions&lt;br&gt;per holding]\n  M[Choose and possibly&lt;br&gt;implement interventions]\n  N{More&lt;br&gt;farmers?}\n  Z((END))\n  A --&gt; F\n  F --&gt;|Y| G\n  G --&gt; N\n  F --&gt;|N| L\n  subgraph \"Consider interventions\"\n  L --&gt; M\n  end\n  M --&gt; N\n  N --&gt;|Y| F\n  N --&gt;|N| Z\n  click G \"04-farmer-decisions-land-use.html\" \"Click for details\"",
    "crumbs": [
      "Documents",
      "Farmer decisions about management interventions"
    ]
  },
  {
    "objectID": "model-description/documents/05-farmer-decisions-interventions.html#the-effect-of-interventions",
    "href": "model-description/documents/05-farmer-decisions-interventions.html#the-effect-of-interventions",
    "title": "Farmer decisions about management interventions",
    "section": "The effect of interventions",
    "text": "The effect of interventions\nA range of possible interventions I=\\{i_1,i_2,\\ldots i_n\\} may be undertaken by farmers, such as\n\nEstablish a wetland\nRiparian planting\nClean races\nDevelop a farm plan\nJoin the emissions trading scheme\netc.\n\nThe currently adopted interventions on a particular holding we denote A which will be a subset of the available interventions I. Not all interventions will make sense on each holding, so it might be more accurate to think of there being a number of intervention sets I_F and on a particular holding of type F, the adopted interventions A are some subset of I_F, with the potential new interventions to be considered in each time interval given by I_F\\setminus A, that is the possible interventions on this land use not yet adopted.\nFor each intervention i_i there are associated impacts, in terms of added costs \\Delta x_{iFL}, and changes in yields \\Delta q_{iFL} and emissions \\Delta e_{iFL}, where the F and L subscripts indicate the dependence of these impacts on farm type F and land use capability L. The impacts of various interventions are stored in a series of &lt;factor&gt;-intervention-impacts.csv files. For example, the costs file looks like this:\n\n\nCode\ninterventions &lt;- read.csv(str_glue(\"{base_dir}/costs-intervention-impacts.csv\"), \n                          header = TRUE)\ninterventions |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    Intervention \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Build_Wetland \n    25 \n    68 \n    NA \n    34 \n  \n  \n    Riparian_Planting \n    26 \n    71 \n    NA \n    11 \n  \n  \n    Clean_Races \n    NA \n    75 \n    NA \n    NA \n  \n  \n    Farm_Plan \n    6 \n    34 \n    NA \n    NA \n  \n  \n    Join_ETS \n    1 \n    25 \n    50 \n    100 \n  \n\n\n\n\n\nand the yields file like this:\n\n\nCode\ninterventions &lt;- read.csv(str_glue(\"{base_dir}/yields-intervention-impacts.csv\"), \n                          header = TRUE)\ninterventions |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F) |&gt;\n  scroll_box(height = \"250px\")\n\n\n\n \n  \n    Intervention \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    Build_Wetland \n    -0.20 \n    -0.02 \n    NA \n    -0.10 \n  \n  \n    Riparian_Planting \n    -0.20 \n    -0.02 \n    NA \n    -0.01 \n  \n  \n    Clean_Races \n    NA \n    0.00 \n    NA \n    NA \n  \n  \n    Farm_Plan \n    -0.05 \n    -0.01 \n    NA \n    NA \n  \n  \n    Join_ETS \n    -0.25 \n    -0.25 \n    0.1 \n    -0.10 \n  \n\n\n\n\n\nThe adopted interventions on a particular holding, change its yield to \nq = q_{FL}\\prod_{i\\in A} \\left( 1+\\Delta q_{iFL} \\right)\n its total costs to \nx = x_{FL} + \\sum_{i\\in A} \\Delta x_{iFL}\n and its emissions to \ne = e_{FL}\\prod_{i\\in A} \\left(1+\\Delta e_{iFL}\\right)\n Together these give us an overall profit for each hectare of land use capability L on a holding of type F that has adopted a set of interventions A \n{\nZ_A = \\underbrace{ p_Fq_{FL}\\prod_{i\\in A} \\left( 1+\\Delta q_{iFL} \\right)}_{\\mathrm{gross\\thinspace income}\\,Y} -\n\\underbrace{\n  \\underbrace{\\left( x_{FL} + \\sum_{i\\in A}\\Delta x_{iFL} \\right)}_{\\mathrm{base\\thinspace costs}} -\n  \\underbrace{te_{FL}\\prod_{i\\in A} \\left(1+\\Delta e_{iFL} \\right)}_{\\mathrm{carbon\\thinspace costs}}\n}_{\\mathrm{total\\thinspace costs}\\,X}\n}\n and the overall profit of any holding is given by summing this result across its constituent hectares. It is convenient to think of the profit as being the difference in the gross income given by the first term in the above equation, and total costs given by the second and third terms.",
    "crumbs": [
      "Documents",
      "Farmer decisions about management interventions"
    ]
  },
  {
    "objectID": "model-description/documents/05-farmer-decisions-interventions.html#considering-interventions",
    "href": "model-description/documents/05-farmer-decisions-interventions.html#considering-interventions",
    "title": "Farmer decisions about management interventions",
    "section": "Considering interventions",
    "text": "Considering interventions\nThe current profit of a holding is determined as set out in Calculation of holding income. Call the current profit, gross income, and total cost components \\tilde{Y}_0 and \\tilde{X}_0, respectively.\nThen, for each intervention under consideration, i.e., each intervention i_i\\in I_F\\setminus A, the new expected gross income, and total costs that would result \\bar{Y}_i and \\bar{X}_i are determined using the same equation, but with A_i=A\\cup\\{i_i\\} augmented to include the new intervention, and no variance in outcomes taken into consideration, i.e., using only the mean yield, costs, and emissions settings (the \\tilde{Y}_0 and \\tilde{X}_0 values will reflect that variance in the most recent year’s results).\nThis gives us relative change in each component, which for a particular component we define as \n\\Delta x = \\left\\{\n\\begin{array}{rl}\n  \\left. 2\\left(|x_1 - x_0|\\right) \\middle/ \\left( |x_1| + |x_0| \\right) \\right. & \\text{if $x_1&gt;x_0$} \\\\\n  \\left. -2\\left(|x_1 - x_0|\\right) \\middle/ \\left( |x_1| + |x_0| \\right) \\right. & \\text{if $x_1&lt;x_0$} \\\\\n  0 & \\text{if $x_0=x_1=0$}\n\\end{array}\\right.\n\nNOTE: this formulation works if both quantities are of the same sign (both positive, or both negative) but produces meaningless results if the before and after quantities are of different sign, and so the approach outlined here cannot be extended to profits, which can be positive or negative.\nValues for \\Delta Y_i and \\Delta X_i are calculated in this way and used to determine adjusted relative probabilities of adoption of each possible intervention. If we denote the baseline probability of adoption of each intervention on a particular farm type by P_{iF} then we adjust this probability using the \\Delta values according to \n{\n  P'_{iF}= \\left. 1 \\middle/\n  \\left(1+e^{-a\\left[ \\ln\\frac{P_{iF}}{1-P_{iF}} + \\Delta Y_i - \\Delta X_i \\right]} \\right) \\right.\n}\n\nThis puts the adoption probability of any intervention on a sigmoid curve, given by P = 1/(1 + e^{-ax}) where x is some ‘pressure for change’ and a is a rate of change in the probability in response to changes in that pressure. We haven’t determined an appropriate setting for a, but intuitively it is a kind of measure of the ‘elasticity’ of farmer responses to changes in the combination of pressures driving their decision making. At low a large pushes are needed to make much difference to the probability of a particular intervention; at high a smaller pushes (perhaps even nudges!) might suffice. In general an adoption probability will be at its most elastic when it is around 0.5 with substantial pressure required to make a low probability event more likely, or to make an already probable outcome near certain.\n\n\nCode\nsigmoid &lt;- function(x, a = 1) {\n  1 / (1 + exp(-a * x))\n}\n\ndf &lt;- expand_grid(`Pressure to change` = -50:50 / 10, \n                  a = c(0.25, 0.5, 1, 2, 5)) |&gt;\n  mutate(Probability = sigmoid(`Pressure to change`, a))\n\nggplot(df) + \n  geom_line(aes(x = `Pressure to change`, y = Probability, group = a)) +\n  annotate(\"label\", x = c(4.25, 3.9, 3, 2, 1), \n           y = c(0.74, 0.87, 0.95, 0.975, 0.99),\n           label = paste0(\"a = \", unique(df$a)))\n\n\n\n\n\n\n\n\n\nA positive calculated change in income \\Delta Y_i pushes the farmer’s probability of adoption of intervention i higher (to the right), and any increase in total costs \\Delta X_i pushes it lower (to the left). We start with initial probabilities of adoption in the farmer-threshold-matrix.csv file:\n\n\nCode\nprobabilities &lt;- read.csv(str_glue(\"{base_dir}/farmer-threshold-matrix.csv\"), \n                          header = TRUE)\nprobabilities |&gt; \n  kable() |&gt; \n  kable_styling(\"striped\", full_width = F)\n\n\n\n \n  \n    disposition \n    intervention \n    SNB \n    Dairy \n    Forest \n    Crop \n  \n \n\n  \n    for_profit \n    Build_Wetland \n    0.7 \n    0.75 \n    0.3 \n    0.5 \n  \n  \n    for_profit \n    Riparian_Planting \n    0.7 \n    0.75 \n    0.2 \n    0.4 \n  \n  \n    for_profit \n    Clean_Races \n    0.2 \n    0.70 \n    0.0 \n    0.0 \n  \n  \n    for_profit \n    Farm_Plan \n    0.7 \n    0.85 \n    0.4 \n    0.6 \n  \n  \n    for_profit \n    Join_ETS \n    0.1 \n    0.10 \n    0.9 \n    0.5 \n  \n  \n    pro_environmental \n    Build_Wetland \n    0.7 \n    0.75 \n    0.3 \n    0.5 \n  \n  \n    pro_environmental \n    Riparian_Planting \n    0.7 \n    0.75 \n    0.2 \n    0.4 \n  \n  \n    pro_environmental \n    Clean_Races \n    0.2 \n    0.70 \n    0.0 \n    0.0 \n  \n  \n    pro_environmental \n    Farm_Plan \n    0.7 \n    0.85 \n    0.4 \n    0.6 \n  \n  \n    pro_environmental \n    Join_ETS \n    0.1 \n    0.10 \n    0.9 \n    0.5 \n  \n\n\n\n\n\nThe exact slope and configuration of the sigmoid function relative to these probabilities (which are themselves arbitrary at present) remains to be determined, and may be tunable to yield plausible outcomes. The general principle is that nudges increase the pressure on farmers to change and will move them to the right on these curves, but that increases to costs will act against such pressures.\nNOTE: We have to consider if this approach is sensible given that it may mean that farmers are less likely to adopt interventions after a good year than they after a bad year…",
    "crumbs": [
      "Documents",
      "Farmer decisions about management interventions"
    ]
  },
  {
    "objectID": "model-description/documents/05-farmer-decisions-interventions.html#adopting-an-intervention",
    "href": "model-description/documents/05-farmer-decisions-interventions.html#adopting-an-intervention",
    "title": "Farmer decisions about management interventions",
    "section": "Adopting an intervention",
    "text": "Adopting an intervention\nAll possible interventions are considered and assigned a probability P'_{iF} on the above basis, giving a set of values P=\\{P_{iF}\\}. These are treated as ‘weights’ on a random draw of a single intervention. More favoured interventions are more likely to be drawn.\nIf a particular intervention is clearly preferable, say \nP=\\{0.01,0.01,0.5\\}\n then it will almost certainly be chosen for further consideration. If all options are similar in their impacts, say \nP=\\{0.2,0.15,0.25\\}\n then any of them stands a good chance of being picked.\nThe intervention picked in this way is then adopted with probability P'_{iF}. This means that \nP=\\{0.1,0.1,0.1\\}\n might put forward any intervention for consideration but that chosen intervention is still unlikely to be adopted. On the other hand \nP=\\{0.5,0.5,0.5\\}\n will give the selected intervention a 50% chance of adoption when it is considered.\nOnce an intervention is adopted, it will no longer be available in the next decision round and its impacts will be factored into calculation of the new Y_0 and X_0 income and costs, serving as a new baseline for the determination of \\Delta Y_i and \\Delta X_i scores.",
    "crumbs": [
      "Documents",
      "Farmer decisions about management interventions"
    ]
  },
  {
    "objectID": "model-description/documents/05-farmer-decisions-interventions.html#a-note-on-how-model-calculations-are-performed",
    "href": "model-description/documents/05-farmer-decisions-interventions.html#a-note-on-how-model-calculations-are-performed",
    "title": "Farmer decisions about management interventions",
    "section": "A note on how model calculations are performed",
    "text": "A note on how model calculations are performed\nIn the model, calculations are performed using matrices.\nAll three of yields, costs, and emissions, are stored as a pair of matrices\n\n\\begin{array}{rcl}\n\\overline{\\mathbf{M}} & = & \\left[\\overline{\\circ}_{LF}\\right]\\\\\n\\widetilde{\\mathbf{M}} & = & \\left[\\widetilde{\\circ}_{LF}\\right]\n\\end{array}\n\nfor the mean and standard deviations respectively, where \\circ stands in for one of q, x, or e. Row entries record the values associate with a given land use capability level, and column entries the values associated with a given farm type.\nPrices are stored as a prices vector, \\mathbf{p}=\\left[p_i\\right], and the carbon tax as a scalar value, t, since it is fixed tax irrespective of farm type.\nIgnoring for now the effect of adopted interventions, this gives us a matrix form of the income calculation for a holding\n\nY = \\mathbf{1}\\left[\\mathbf{L}\\odot N\\left(\\overline{\\mathbf{Q}},\\frac{\\widetilde{\\mathbf{Q}}}{\\sqrt{n_{LF}}}\\right)\\right]\\mathbf{p}\n\nwhere \\mathbf{L} is a LUC-landuse profile matrix for the farm with row and column entries n_{LF} giving the numbers of cells in each LUC and land use category on that holding, and \\odot denotes element-wise multiplication of two matrices. A similar matrix equation is applicable to the costs for a holding.\nThe most important thing to note here is the reduction in the standard deviation of the normal distribution from which yields q are drawn by the factor \\sqrt{n_{LF}}. This allows only one random number draw for each LUC-landuse combination on a holding, rather than for every cell on the farm individually, and allows more rapid calculation of holding income, costs, and emissions. The penalty is that all cells in the model of the same LUC-landuse combination have the same mean yield, input cost, emissions every model tick, and that every LUC-landuse combination on each holding sees the same deviation from the mean applied each tick.\nCalculation of additional costs resulting from adoption of various interventions can also be formulated as a matrix calculation, using a row-matrix of adopted interventions where 1 denotes adoption and 0 non-adoption of each intervention.\nA more involved matrix formulation is required for the impact of adoption of interventions on emissions and yields because these are combined multiplicatively. The model code is the best guide to the details in this case. The code has been written to ensure that the equations detailed in the section on the effect of interventions have been followed.\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nFixed for some changes to input file names.\n\n\n2025-02-19\nSplit out from original ‘core loop’ document.\n\n\n2024-07-28\nCorrection in equation summarising full calculation of profit. Added note to consider the nudge calculation’s possible bias favouring changes after bad years.\n\n\n2024-07-05\nCorrected relative change from a percentage to a proportion.\n\n\n2024-07-04\nAdded detail on calculation of relative change noting that profit can’t be handled this way because it is \\pm and relative change is meaningless for such variables.\n\n\n2024-07-03\nAdded bar chart of farm income/costs estimates.\n\n\n2024-07-02\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer decisions about management interventions"
    ]
  },
  {
    "objectID": "model-description/documents/03-farmer-decisions-general.html",
    "href": "model-description/documents/03-farmer-decisions-general.html",
    "title": "Farmer decision making: general",
    "section": "",
    "text": "The overall farmer decision making process is shown below. Each farmer goes through this sequence each model time step. Note that the aging and succession step may also result in all of farm land use change, which follows the same general procedure described in Farmer decisions about land use, except that single holding changes are not considered, and consideration of whole-farm land use change is triggered by any single holding losing money.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[Age farmers and&lt;br&gt;replace any that exit]\n  C[Update income, costs, and&lt;br&gt;profit of holdings and farms]\n  E[/For each&lt;br&gt;farmer.../]\n  F{Loss-making&lt;br&gt;holdings?}\n  G[&lt;span style='color:red;'&gt;Consider land&lt;br&gt;use change&lt;/span&gt;]\n  L[&lt;span style='color:red;'&gt;Consider&lt;br&gt;interventions&lt;/span&gt;]\n  N[/More&lt;br&gt;farmers?/]\n  Z((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt; E\n  E --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| L\n  G --&gt; N\n  L --&gt; N\n  N --&gt;|Y| E\n  N --&gt;|N| Z\n  click G \"04-farmer-decisions-land-use.html\" \"Click for details\"\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2024-12-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer decision making: general"
    ]
  },
  {
    "objectID": "model-description/documents/03-farmer-decisions-general.html#top-level-farmer-decision-flowchart",
    "href": "model-description/documents/03-farmer-decisions-general.html#top-level-farmer-decision-flowchart",
    "title": "Farmer decision making: general",
    "section": "",
    "text": "The overall farmer decision making process is shown below. Each farmer goes through this sequence each model time step. Note that the aging and succession step may also result in all of farm land use change, which follows the same general procedure described in Farmer decisions about land use, except that single holding changes are not considered, and consideration of whole-farm land use change is triggered by any single holding losing money.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[Age farmers and&lt;br&gt;replace any that exit]\n  C[Update income, costs, and&lt;br&gt;profit of holdings and farms]\n  E[/For each&lt;br&gt;farmer.../]\n  F{Loss-making&lt;br&gt;holdings?}\n  G[&lt;span style='color:red;'&gt;Consider land&lt;br&gt;use change&lt;/span&gt;]\n  L[&lt;span style='color:red;'&gt;Consider&lt;br&gt;interventions&lt;/span&gt;]\n  N[/More&lt;br&gt;farmers?/]\n  Z((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt; E\n  E --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| L\n  G --&gt; N\n  L --&gt; N\n  N --&gt;|Y| E\n  N --&gt;|N| Z\n  click G \"04-farmer-decisions-land-use.html\" \"Click for details\"\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2024-12-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer decision making: general"
    ]
  },
  {
    "objectID": "model-description/documents/00a-model-elements.html",
    "href": "model-description/documents/00a-model-elements.html",
    "title": "Elements of the model",
    "section": "",
    "text": "Model grid cells represent 400×400 meter (16 hectare) areas. Model time steps represent 5 years of elapsed time.",
    "crumbs": [
      "Documents",
      "Elements of the model"
    ]
  },
  {
    "objectID": "model-description/documents/00a-model-elements.html#footnotes",
    "href": "model-description/documents/00a-model-elements.html#footnotes",
    "title": "Elements of the model",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nThe reason for this difference is an implementation detail in NetLogo. Agents (which farmers, farms, and holdings are) can always directly access attributes of the grid cells they are in. If the land use attribute had the same name both in grid cells and in the various agents, then accessing landuse would be ambiguous: does it refer to the agent’s attribute or the grid cell’s attribute? Naming the attribute differently resolves the ambiguity.↩︎\nTermed ‘turtles’ in NetLogo due to NetLogo’s origins in the Logo programming language which introduced ‘turtle graphics’. See Resnick M. 1994. Turtles, Termites, and Traffic Jams: Explorations in Massively Parallel Microworlds. Cambridge MA: MIT Press.↩︎",
    "crumbs": [
      "Documents",
      "Elements of the model"
    ]
  },
  {
    "objectID": "model-description/documents/00b-model-files.html",
    "href": "model-description/documents/00b-model-files.html",
    "title": "Organisation of folders and files",
    "section": "",
    "text": "To make managing model source code a little easier it is broken into a main .nlogo file and a number of NetLogo source .nls files. Unfortunately the built in IDE for NetLogo is rather primitive, so this breakdown is not perfect, but it at least keeps the size of each source file manageable (a few hundred lines at most), where a monolithic flat file would be an unwieldy 3000+ lines (and counting). The files are as follows:\n\n\n\n\n\n\n\nFilename\nPurpose\n\n\n\n\nabm-working.nlogo\nDefinition of globals, setup and main model loop, model reset code\n\n\nmtm-geography.nls\nSetup of model geography, whether from GIS files or random\n\n\nmtm-read-files.nls\nReading of market setting files into tables and matrices…\n\n\nmtm-tables.nls\n… using code in this file for reading tabular data in various formats\n\n\nmtm-farm.nls\nInitialisation and maintenance of farm agents\n\n\nmtm-farmer.nls\nInitialisation and maintenance of farmer agents, primarily procedures for choosing among options for land use change / management interventions\n\n\nmtm-holding.nls\nInitialisation and maintence of holding agents, primarily calculation of income and costs\n\n\nmtm-loans.nls\nCode for calculation of loan payments, outstanding principal, etc.\n\n\nmtm-plots.nls\nPlotting of some model statistics for interactive exploration\n\n\nmtm-results.nls\nRecording and writing to files of model run results\n\n\nmtm-profile.nls\nProfiling of model performance (not much used)\n\n\nmtm-render.nls\nVisual rendering of model state\n\n\nmtm-utils.nls\nVarious list, matrix, string, statistical distributions, and other utility functions, used throughout the model",
    "crumbs": [
      "Documents",
      "Organisation of folders and files"
    ]
  },
  {
    "objectID": "model-description/documents/00b-model-files.html#code",
    "href": "model-description/documents/00b-model-files.html#code",
    "title": "Organisation of folders and files",
    "section": "",
    "text": "To make managing model source code a little easier it is broken into a main .nlogo file and a number of NetLogo source .nls files. Unfortunately the built in IDE for NetLogo is rather primitive, so this breakdown is not perfect, but it at least keeps the size of each source file manageable (a few hundred lines at most), where a monolithic flat file would be an unwieldy 3000+ lines (and counting). The files are as follows:\n\n\n\n\n\n\n\nFilename\nPurpose\n\n\n\n\nabm-working.nlogo\nDefinition of globals, setup and main model loop, model reset code\n\n\nmtm-geography.nls\nSetup of model geography, whether from GIS files or random\n\n\nmtm-read-files.nls\nReading of market setting files into tables and matrices…\n\n\nmtm-tables.nls\n… using code in this file for reading tabular data in various formats\n\n\nmtm-farm.nls\nInitialisation and maintenance of farm agents\n\n\nmtm-farmer.nls\nInitialisation and maintenance of farmer agents, primarily procedures for choosing among options for land use change / management interventions\n\n\nmtm-holding.nls\nInitialisation and maintence of holding agents, primarily calculation of income and costs\n\n\nmtm-loans.nls\nCode for calculation of loan payments, outstanding principal, etc.\n\n\nmtm-plots.nls\nPlotting of some model statistics for interactive exploration\n\n\nmtm-results.nls\nRecording and writing to files of model run results\n\n\nmtm-profile.nls\nProfiling of model performance (not much used)\n\n\nmtm-render.nls\nVisual rendering of model state\n\n\nmtm-utils.nls\nVarious list, matrix, string, statistical distributions, and other utility functions, used throughout the model",
    "crumbs": [
      "Documents",
      "Organisation of folders and files"
    ]
  },
  {
    "objectID": "model-description/documents/00b-model-files.html#data",
    "href": "model-description/documents/00b-model-files.html#data",
    "title": "Organisation of folders and files",
    "section": "Data",
    "text": "Data\nA key idea underpinning model development was to avoid hard coding dozens, or even hundreds of settings into the model code. To that end a data folder in the same directory as the model source code has subfolders market and spatial themselves with subfolders containing model input files that can specify scenarios whether catchment-based (the spatial folder) or market-based (the market folder).\n\nMarket\nEach ./data/market/&lt;scenario-name&gt; subfolder contains a collection of files that configure aspects of the market, which together form a scenario.\n\n\n\nFilename\nPurpose\n\n\n\n\nconversion-probabilities.csv\nRelative probability of conversion between the different land uses.\n\n\nenvironmental-metrics.csv\nA list of environmental metrics which the modeller wishes to explore in this scenario. Each metric should have a name, and a limit and price associated (where either may be NA), which are regulatory limits and taxes associated with that metric. This is now where the carbon price in the model is set. Files called &lt;factor&gt;.csv and &lt;factor&gt;-intervention-impacts.csv must also be present in the folder for all listed metrics. Metrics can be ‘commented out’ by preceding them with a # in this file, when they will then have no impact on a model run (this is for ease of making variant scenarios).\n\n\n&lt;factor&gt;.csv\nWhere &lt;factor&gt; may be costs, yields, or any of the active environmental-metrics listed in the environmental-metrics.csv file. Mean and st dev. of &lt;factor&gt; per ha. by land use and land use capability.\n\n\n&lt;factor&gt;-intervention-impacts.csv\nWhere &lt;factor&gt; may be costs, yields, or any of the active environmental-metrics listed in the environmental-metrics.csv file. Impacts on yields, costs, and environmental metrics per ha. by management intervention and land use.\n\n\nfarmer-threshold-matrix.csv\nBaseline probabilities of adoption by farmers of available management interventions by land use.\n\n\nintervention-initial-props\nInitial proportions of holdings of each landuse on which each intervention should already have been implemented at model initialisation; also includes a maximum proportion for each of these on each landuse type reflecting possible obstacles to implementation.\n\n\nfarmer-dispositions.csv\nThe farmer dispositions in the model including their relative proportions.\n\n\nsuitabilities.csv\nLists of land use that are allowed on each land use capability class.\n\n\nprices.csv\nMarket price of commodities (per unit of output) by land use.\n\n\ndebt-service-ratios.csv\nMean and standard deviation of the debt service ratios of each farm type.1\n\n\ncosts-yields-time-series.csv and prices-time-series.csv\nTime series multipliers for costs, yields, and prices.\n\n\n\nThe first of these files (farmer-threshold-matrix.csv) effectively defines the available land use types and interventions and additional rows or columns could be added to it to further detail the model’s representation. Note: Extending the model in this way to add interventions is trivial; adding additional land uses will require additional code to deal with visualisation aspects.\n\n\nGeographical setting\nThe geographical setting of the model can be initialised randomly or from GIS files (controlled by a switch in the model GUI).\n\nReal world setting from GIS data\nInitialisation from GIS files uses a parcels.shp shapefile, and luc.asc and landuse.asc raster files to specify respectively the farms, LUC landscape, and land use in the model. Farms are again subdivided into holdings based on LUC. Different catchments can be applied by providing these files in a folder ./data/spatial/&lt;region-name&gt;. Localisation of the model to a particular settings is relatively straightforward given appropriate files for a particular catchment. These files have attributes as follows:\n\nparcels.shp should have a unique STR_ID attribute per farm.\nluc.asc should contain integer values from 1 to 8 inclusive and -9999 values outside the study area.\nlanduse.asc should contain integer values encoded as follows:\n\n\n\n\n\n\n\n\nValue\nLanduse\n\n\n\n\n0\nHorticulture (referred to in model code as Crop)\n\n\n1\nDairy\n\n\n2\nForestry\n\n\n3\nBeef and lamb (referred to in the model code as SNB; includes also deer)\n\n\n1000\nNot farmed, but inside the catchment (scrub, indigenous forest, conservation land)\n\n\n-9999\nOutside the catchment\n\n\n\nThe important thing here is not the specific encoding chosen, but that any changes made here match an alphabetical ordering of the corresponding landuses in the farmer-threshold-matrix.csv file. At present these are Crop, Dairy, Forest, and SNB corresponding to 0, 1, 2, 3 above. If a more detailed landuse classification is desired then the new landuses would need to be added in all initialisation files.\n\n\nRandom geography\nRandom initialisation first sets up a land use capability (LUC) landscape using iterative smoothing2 (number of iterations of smoothing set by luc-aggregation-steps), then randomly distributes farmers across the landscape assigning them a farm based on Voronoi polygons3 and breaking the farm into sub-farm level holdings based on contiguous areas of the same LUC. Additionally a voter model is iteratively run on the landuses so that regions of uniform landuse are produced (number of iterations of voter model set by landuse-aggregation-steps).\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.\n\n\n2025-08-05\nSplit out to a separate model file config page.\n\n\n2025-10-17\nUpdated to reflect addition of debt.",
    "crumbs": [
      "Documents",
      "Organisation of folders and files"
    ]
  },
  {
    "objectID": "model-description/documents/00b-model-files.html#footnotes",
    "href": "model-description/documents/00b-model-files.html#footnotes",
    "title": "Organisation of folders and files",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nSee Ma W, A Renwick and X Zhou. (2020). The relationship between farm debt and dairy productivity and profitability in New Zealand. Journal of Dairy Science 103(9), 8251-8256.↩︎\nSee pages 60-63 in O’Sullivan D and GLW Perry. 2013. Spatial Simulation: Exploring Pattern and Process. Chichester, UK: Wiley.↩︎\nOkabe A, B Boots, K Sugihara, and SN Chiu. 2000. Spatial Tessellations: Concepts and Applications of Voronoi Diagrams. 2nd edn. Chichester, UK: Wiley.↩︎",
    "crumbs": [
      "Documents",
      "Organisation of folders and files"
    ]
  },
  {
    "objectID": "sigmoid-testing/sigmoid-nudging.html",
    "href": "sigmoid-testing/sigmoid-nudging.html",
    "title": "MtM ABM documentation",
    "section": "",
    "text": "title: “Nudges and sigmoid function” output: pdf_document: default html_document: default date: “2023-06-27”\n\n\n\nlibrary(pracma)\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\n\nnudge_threshold &lt;- Vectorize(\n  function(t, a, nudge) {\n    c &lt;- logit(t, a = a)\n    sigmoid(c + nudge, a = a)\n  }\n)\n\n\ndf &lt;- expand_grid(\n  `Baseline p` = c(0.01, 0.05, 0.1, 0.25, 0.5),\n  Responsiveness = c(0.2, 0.5, 1, 2, 3),\n  Nudge = -10:20 / 10\n) %&gt;%\n  as_tibble() %&gt;%\n  mutate(`Nudged p` = nudge_threshold(`Baseline p`, Responsiveness, Nudge))\n\n\nggplot(df) +\n  geom_line(aes(x = Nudge, y = `Nudged p`, group = `Baseline p`)) + \n  geom_hline(aes(yintercept = `Baseline p`), colour = \"red\", lty = \"dashed\") +\n  facet_grid(`Baseline p` ~ Responsiveness, labeller = label_both) + \n  theme_bw()"
  },
  {
    "objectID": "model-description/documents/01a-model-initialisation.html",
    "href": "model-description/documents/01a-model-initialisation.html",
    "title": "Model initialisation",
    "section": "",
    "text": "The steps in model initialisation are shown in the flow chart below. Although almost all code between these two initialisation pathways is shared, they are executed in separate sequences to ensure that random seed initialisation works correctly in the random geography case. The steps colour pink and blue below run differently depending on whether initialisation is random or from GIS files.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[Read land uses and&lt;br&gt;interventions from files]\n  C{Geography&lt;br&gt;from GIS&lt;br&gt;files?}\n  D[Read LUC&lt;br&gt;from &lt;span style='font-family:monospace;'&gt;luc.asc&lt;/span&gt;]\n  E[Read farms&lt;br&gt;from &lt;span style='font-family:monospace;'&gt;parcels.shp&lt;/span&gt;]\n  F[Initialise farmers&lt;br&gt;one per farm]\n  G[Read land use from&lt;br&gt;&lt;span style='font-family:monospace;'&gt;landuse.asc&lt;/span&gt; and assign&lt;br&gt;to farms]\n  H[Setup farmer networks]\n  I[Partition farms by&lt;br&gt;LUC into holdings]\n  J[Setup LUC&lt;br&gt;on land]\n  K[Partition land&lt;br&gt;into farms]\n  L[Initialise farmers&lt;br&gt;one per farm]\n  M[Partition farms by&lt;br&gt;LUC into holdings]\n  N[Setup farmer networks]\n  O[Partition farms by&lt;br&gt;LUC into holdings]\n  P[Initialise market&lt;br&gt;settings from files]\n  Q[Run one&lt;br&gt;'burn-in' cycle]\n  R[Store settings&lt;br&gt;for rapid reset]\n  S((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt;|Y| D\n  D --&gt; E\n  E --&gt; F\n  F --&gt; G\n  G --&gt; H\n  H --&gt; I\n  I --&gt; P\n  C --&gt;|N| J\n  J --&gt; K\n  K --&gt; L\n  L --&gt; M\n  M --&gt; N\n  N --&gt; O\n  O --&gt; P\n  P --&gt; Q\n  Q --&gt; R\n  R --&gt; S\n  classDef pink fill:#fcc\n  classDef blue fill:#cdf\n  class D,E,G pink\n  class J,K,M blue\n\n\n\n\n\n\nAn important detail is that initialisation completes with a run of a single cycle of the model. This means in the GIS initialisation case that the starting state of the model will not necessarily match exactly the data contained in the initialisation files, but will reflect one tick of model evolution. Using a random seed, this step is guaranteed to be the same every time so that repeatability is not affected. A single ‘burn-in’ step is needed to generate plausible prior year income and costs which the model requires to run.\nIt is worth noting that there are some tricky sequencing issues in the setup which make the associated code a little ‘fragile’ with some obvious-seeming changes for ‘efficiency’ likely to break the model! (These are noted in code comments.)\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.\n\n\n2025-08-05\nMade differences between random and GIS initialisation clearer.\n\n\n2025-10-17\nSome blocks with overflow labels fixed.",
    "crumbs": [
      "Documents",
      "Model initialisation"
    ]
  },
  {
    "objectID": "model-description/documents/01c-farmer-aging-and-succession.html",
    "href": "model-description/documents/01c-farmer-aging-and-succession.html",
    "title": "Farmer aging and succession",
    "section": "",
    "text": "Farmers age by five years per model tick (specified by hard-coded global years-per-tick).\nAfter aging, a farmer is tested for exiting the industry (or retiring or dying, or however we want to think about it). They exit with a probability given by\n\np_{\\mathrm{exit}} = \\left\\{\n  \\begin{array}{cl}\n    \\frac{5}{91-\\mathrm{age}} & \\text{if age} &lt;    91 \\\\\n                            1 & \\text{if age} \\geq 91\n  \\end{array}\n\\right.\n\nThis means that farmers are not guaranteed to exit until they are 90, reflecting the surprising numbers of older farmers in survey data.",
    "crumbs": [
      "Documents",
      "Farmer aging and succession"
    ]
  },
  {
    "objectID": "model-description/documents/01c-farmer-aging-and-succession.html#farmer-aging",
    "href": "model-description/documents/01c-farmer-aging-and-succession.html#farmer-aging",
    "title": "Farmer aging and succession",
    "section": "",
    "text": "Farmers age by five years per model tick (specified by hard-coded global years-per-tick).\nAfter aging, a farmer is tested for exiting the industry (or retiring or dying, or however we want to think about it). They exit with a probability given by\n\np_{\\mathrm{exit}} = \\left\\{\n  \\begin{array}{cl}\n    \\frac{5}{91-\\mathrm{age}} & \\text{if age} &lt;    91 \\\\\n                            1 & \\text{if age} \\geq 91\n  \\end{array}\n\\right.\n\nThis means that farmers are not guaranteed to exit until they are 90, reflecting the surprising numbers of older farmers in survey data.",
    "crumbs": [
      "Documents",
      "Farmer aging and succession"
    ]
  },
  {
    "objectID": "model-description/documents/01c-farmer-aging-and-succession.html#age-of-farmers-at-model-initialisation",
    "href": "model-description/documents/01c-farmer-aging-and-succession.html#age-of-farmers-at-model-initialisation",
    "title": "Farmer aging and succession",
    "section": "Age of farmers at model initialisation",
    "text": "Age of farmers at model initialisation\nThe age of farmers at model initialisation is drawn from a :beta-binomial distribution, with n=70, \\alpha=5, and \\beta=4, and ages then offset by adding 20 (so that 20 is the youngest possible age). An example distribution for 250 farmers is shown below, with the red line showing the associated probability density function.\n\n\n\n\n\n\n\n\n\nThis distribution has been roughly matched to survey evidence of farmer ages (it has not been fitted, just matched approximately by eye).",
    "crumbs": [
      "Documents",
      "Farmer aging and succession"
    ]
  },
  {
    "objectID": "model-description/documents/01c-farmer-aging-and-succession.html#age-of-new-farmers",
    "href": "model-description/documents/01c-farmer-aging-and-succession.html#age-of-new-farmers",
    "title": "Farmer aging and succession",
    "section": "Age of new farmers",
    "text": "Age of new farmers\nIncoming farmer ages are also drawn from a beta-binomial distribution with n=45, \\alpha=4, \\alpha=2 again offset so that the youngest farmers are 20.\n\n\n\n\n\n\n\n\n\nThis distribution might appear to skew older than the model age initialisation, but note that the range of values tops out at 65 years as shown in the direct comparison of the probability density functions below.\n\n\n\n\n\n\n\n\n\nIn any case, this paramterisation keeps the farmer age distribution fairly stable over time.\nMore detailed fitting and analysis of these (hard-coded) parameter settings around farmer ages is probably desirable.",
    "crumbs": [
      "Documents",
      "Farmer aging and succession"
    ]
  },
  {
    "objectID": "model-description/documents/01c-farmer-aging-and-succession.html#entrant-farmers-and-landuse-change",
    "href": "model-description/documents/01c-farmer-aging-and-succession.html#entrant-farmers-and-landuse-change",
    "title": "Farmer aging and succession",
    "section": "Entrant farmers and landuse change",
    "text": "Entrant farmers and landuse change\nA new farmer will consider whole-farm landuse change (see Farmer decisions about land use for details) under conditions to be determined. This pathway to land use is more likely to lead to land use change at the whole farm level than the more piecemeal changes that tend to be made by incumbent farmers.\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-02-19\nInitial post.\n\n\n2025-10-17\nUpdated to reflect changing in aging by 5 years per tick.",
    "crumbs": [
      "Documents",
      "Farmer aging and succession"
    ]
  },
  {
    "objectID": "model-description/documents/03a-farmer-decisions-general.html",
    "href": "model-description/documents/03a-farmer-decisions-general.html",
    "title": "Farmer decision making: general",
    "section": "",
    "text": "The overall farmer decision making process is shown below. Each farmer goes through this sequence each model time step. Note that the aging and succession step may also result in all of farm land use change, which follows the same general procedure described in Farmer decisions about land use. Click on the red text to find out what happens in each ‘behavioural mode’.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[Age farmers and&lt;br&gt;replace any that exit]\n  C[Update income, costs, and&lt;br&gt;profit of holdings and farms]\n  E[/For each&lt;br&gt;farmer.../]\n  F[Debt-service ratio DSR &larr;&lt;br&gt;&lt;span style='font-family:monospace;'&gt;current-debt / current-income&lt;/span&gt;]\n  G1{DSR &geq;&lt;br&gt;1.00 ?}\n  G2{DSR &geq;&lt;br&gt;0.50 ?}\n  G3{DSR &geq;&lt;br&gt;0.25 ?}\n  H1[&lt;span style='color:red;'&gt;Exit&lt;br&gt;market]\n  H2[&lt;span style='color:red;'&gt;Survival&lt;br&gt;mode&lt;/span&gt;]\n  H3[&lt;span style='color:red;'&gt;Constrained&lt;br&gt;mode&lt;/span&gt;]\n  H4[&lt;span style='color:red;'&gt;Optimisation&lt;br&gt;mode&lt;/span&gt;]\n  N{More&lt;br&gt;farmers?}\n  Z((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt; E\n  E --&gt; F\n  F --&gt; G1\n  G1 --&gt;|N| G2\n  G1 --&gt;|Y| H1\n  G2 --&gt;|N| G3\n  G2 --&gt;|Y| H2\n  G3 --&gt;|N| H4\n  G3 --&gt;|Y| H3\n  H1 --&gt; N\n  H2 --&gt; N\n  H3 --&gt; N\n  H4 --&gt; N\n  N --&gt;|Y| E\n  N --&gt;|N| Z\n  click H1 \"03b-exit-market-succession.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nChanging to account for DSR-baed decision loop.\n\n\n2024-12-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer decision making: general"
    ]
  },
  {
    "objectID": "model-description/documents/03a-farmer-decisions-general.html#top-level-farmer-decision-flowchart",
    "href": "model-description/documents/03a-farmer-decisions-general.html#top-level-farmer-decision-flowchart",
    "title": "Farmer decision making: general",
    "section": "",
    "text": "The overall farmer decision making process is shown below. Each farmer goes through this sequence each model time step. Note that the aging and succession step may also result in all of farm land use change, which follows the same general procedure described in Farmer decisions about land use. Click on the red text to find out what happens in each ‘behavioural mode’.\n\n\n\n\n\nflowchart TB\n  A((START))\n  B[Age farmers and&lt;br&gt;replace any that exit]\n  C[Update income, costs, and&lt;br&gt;profit of holdings and farms]\n  E[/For each&lt;br&gt;farmer.../]\n  F[Debt-service ratio DSR &larr;&lt;br&gt;&lt;span style='font-family:monospace;'&gt;current-debt / current-income&lt;/span&gt;]\n  G1{DSR &geq;&lt;br&gt;1.00 ?}\n  G2{DSR &geq;&lt;br&gt;0.50 ?}\n  G3{DSR &geq;&lt;br&gt;0.25 ?}\n  H1[&lt;span style='color:red;'&gt;Exit&lt;br&gt;market]\n  H2[&lt;span style='color:red;'&gt;Survival&lt;br&gt;mode&lt;/span&gt;]\n  H3[&lt;span style='color:red;'&gt;Constrained&lt;br&gt;mode&lt;/span&gt;]\n  H4[&lt;span style='color:red;'&gt;Optimisation&lt;br&gt;mode&lt;/span&gt;]\n  N{More&lt;br&gt;farmers?}\n  Z((END))\n  A --&gt; B\n  B --&gt; C\n  C --&gt; E\n  E --&gt; F\n  F --&gt; G1\n  G1 --&gt;|N| G2\n  G1 --&gt;|Y| H1\n  G2 --&gt;|N| G3\n  G2 --&gt;|Y| H2\n  G3 --&gt;|N| H4\n  G3 --&gt;|Y| H3\n  H1 --&gt; N\n  H2 --&gt; N\n  H3 --&gt; N\n  H4 --&gt; N\n  N --&gt;|Y| E\n  N --&gt;|N| Z\n  click H1 \"03b-exit-market-succession.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nChanging to account for DSR-baed decision loop.\n\n\n2024-12-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer decision making: general"
    ]
  },
  {
    "objectID": "model-description/documents/03b-exit-market-succession.html",
    "href": "model-description/documents/03b-exit-market-succession.html",
    "title": "Farmer exit market (succession)",
    "section": "",
    "text": "When under high debt stress (debt service ratio ≥1) farmers will exit the market, and are succeeded by a new farmer. The new farmer is initialised exactly as occurs under age driven succession.\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nChanging to account for DSR-baed decision loop.\n\n\n2024-12-19\nInitial post.",
    "crumbs": [
      "Documents",
      "Farmer exit market (succession)"
    ]
  },
  {
    "objectID": "model-description/documents/03c-survival-mode.html",
    "href": "model-description/documents/03c-survival-mode.html",
    "title": "Survival mode",
    "section": "",
    "text": "When the debt service ratio is greater than 0.5, farmers focus on making money and do not consider any management interventions.\n\n\n\n\n\nflowchart TB\n  A((START))\n  F{Any&lt;br&gt;loss-making&lt;br&gt;holdings?}\n  G[\"&lt;span style='font-family:monospace'&gt;options&lt;/span&gt; &larr; &lt;span style='font-family:monospace'&gt; #123;#125; &lt;/span&gt;\"]\n  H[SOME&lt;br&gt;FINANCIAL&lt;br&gt;OPTION?]\n  J[Add all possible&lt;br&gt;per holding land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  K[Choose among choices&lt;br&gt;in  &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  Z((END))\n  A --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| H\n  H --&gt; Z\n  G --&gt; J\n  J --&gt; K\n  K --&gt; Z\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nInitial post.",
    "crumbs": [
      "Documents",
      "Survival mode"
    ]
  },
  {
    "objectID": "model-description/documents/03c-survival-mode.html#survival-mode",
    "href": "model-description/documents/03c-survival-mode.html#survival-mode",
    "title": "Survival mode",
    "section": "",
    "text": "When the debt service ratio is greater than 0.5, farmers focus on making money and do not consider any management interventions.\n\n\n\n\n\nflowchart TB\n  A((START))\n  F{Any&lt;br&gt;loss-making&lt;br&gt;holdings?}\n  G[\"&lt;span style='font-family:monospace'&gt;options&lt;/span&gt; &larr; &lt;span style='font-family:monospace'&gt; #123;#125; &lt;/span&gt;\"]\n  H[SOME&lt;br&gt;FINANCIAL&lt;br&gt;OPTION?]\n  J[Add all possible&lt;br&gt;per holding land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  K[Choose among choices&lt;br&gt;in  &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  Z((END))\n  A --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| H\n  H --&gt; Z\n  G --&gt; J\n  J --&gt; K\n  K --&gt; Z\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nInitial post.",
    "crumbs": [
      "Documents",
      "Survival mode"
    ]
  },
  {
    "objectID": "model-description/documents/03d-constrained-mode.html",
    "href": "model-description/documents/03d-constrained-mode.html",
    "title": "Constrained mode",
    "section": "",
    "text": "The decision sequence followed by farmers each time step is shown below.\n\n\n\n\n\nflowchart TB\n  A((START))\n  F{Any&lt;br&gt;loss-making&lt;br&gt;holdings?}\n  G[\"&lt;span style='font-family:monospace'&gt;options&lt;/span&gt; &larr; {}\"]\n  H{Farm&lt;br&gt;losing money&lt;br&gt;overall?}\n  I[Add possible&lt;br&gt;all of farm land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  J[Add possible&lt;br&gt;per holding land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  K[Choose among choices&lt;br&gt;in  &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  L[&lt;span style='color:red;'&gt;Consider &lt;i&gt;easy&lt;/i&gt;&lt;br&gt;interventions&lt;/span&gt;]\n  Z((END))\n  A --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| L\n  G --&gt; H\n  H --&gt;|Y| I\n  H --&gt;|N| J\n  I --&gt; J\n  J --&gt; K\n  K --&gt; Z\n  L --&gt; Z\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\nConsideration of land use change occurs if any holdings on the farm are loss-making. Consideration of land use change precludes making any management interventions this model time step, regardless of whether or not land use changes are made. Because most interventions reduce profitability this can be understood as a response to tough times: if some parts of a farm are loss-making then it is unlikely a farmer will respond by making costly changes anywhere on the farm.\nOnce the ‘Consider land use’ sequence is entered, the next decision point is to ask if the farm is losing money in aggregate (i.e., summed across all holdings). If so, then whole-farm land use change is added to the list of possibilities. If not this option is ignored, and only single holding land use change on the loss-making holdings are added to the list of possibilities.\nThe list of possible land use changes is a series of triples\n[affected-holdings, new-land-use, probability]\nThe whole-farm land use change options will list all holdings in the current land use as affected-holdings.\nOne of these options is randomly drawn with relative probability given by its probability, and then it is implemented with that probability. This means that if all the options are low probability then any of them might be drawn, but it remains unlikely to be implemented. If one option has a higher probability than the others it is more likely to be drawn, but if its probability is low, it is still unlikely to happen. (A similar procedure is followed for management interventions under consideration, see this explanation.)\nProbabilities are calculated based on the values in the ./data/market/&lt;scenario&gt;/conversion-probabilities.csv file. For non-succession triggered whole-farm conversions the probability of conversion may be optionally ‘down-weighted’ by the proportion of the land area of the farm that is losing money.\nImportant changes to this procedure that should be considered are the impact of policy settings, farmer dispositions, the effect of recent changes on similar farms, and the relative profitability of different land uses. Policy settings and land use profitability can probably be folded into the conversion probabilities of a scenario, but farmer disposition and peer-farmer behaviours would required additional code.\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nInitial post.",
    "crumbs": [
      "Documents",
      "Constrained mode"
    ]
  },
  {
    "objectID": "model-description/documents/03e-optimisation-mode.html",
    "href": "model-description/documents/03e-optimisation-mode.html",
    "title": "Optimisation mode",
    "section": "",
    "text": "The decision sequence followed by farmers each time step is shown below.\n\n\n\n\n\nflowchart TB\n  A((START))\n  F{Any&lt;br&gt;loss-making&lt;br&gt;holdings?}\n  G[\"&lt;span style='font-family:monospace'&gt;options&lt;/span&gt; &larr; {}\"]\n  H{Farm&lt;br&gt;losing money&lt;br&gt;overall?}\n  I[Add possible&lt;br&gt;all of farm land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  J[Add possible&lt;br&gt;per holding land use&lt;br&gt;changes to &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  K[Choose among choices&lt;br&gt;in  &lt;span style=\"font-family:monospace;\"&gt;options&lt;/span&gt;]\n  L[&lt;span style='color:red;'&gt;Consider &lt;i&gt;all&lt;/i&gt;&lt;br&gt;interventions&lt;/span&gt;]\n  Z((END))\n  A --&gt; F\n  F --&gt;|Y| G\n  F --&gt;|N| L\n  G --&gt; H\n  H --&gt;|Y| I\n  H --&gt;|N| J\n  I --&gt; J\n  J --&gt; K\n  K --&gt; Z\n  L --&gt; Z\n  click L \"05-farmer-decisions-interventions.html\" \"Click for details\"\n\n\n\n\n\n\nConsideration of land use change occurs if any holdings on the farm are loss-making. Consideration of land use change precludes making any management interventions this model time step, regardless of whether or not land use changes are made. Because most interventions reduce profitability this can be understood as a response to tough times: if some parts of a farm are loss-making then it is unlikely a farmer will respond by making costly changes anywhere on the farm.\nOnce the ‘Consider land use’ sequence is entered, the next decision point is to ask if the farm is losing money in aggregate (i.e., summed across all holdings). If so, then whole-farm land use change is added to the list of possibilities. If not this option is ignored, and only single holding land use change on the loss-making holdings are added to the list of possibilities.\nThe list of possible land use changes is a series of triples\n[affected-holdings, new-land-use, probability]\nThe whole-farm land use change options will list all holdings in the current land use as affected-holdings.\nOne of these options is randomly drawn with relative probability given by its probability, and then it is implemented with that probability. This means that if all the options are low probability then any of them might be drawn, but it remains unlikely to be implemented. If one option has a higher probability than the others it is more likely to be drawn, but if its probability is low, it is still unlikely to happen. (A similar procedure is followed for management interventions under consideration, see this explanation.)\nProbabilities are calculated based on the values in the ./data/market/&lt;scenario&gt;/conversion-probabilities.csv file. For non-succession triggered whole-farm conversions the probability of conversion may be optionally ‘down-weighted’ by the proportion of the land area of the farm that is losing money.\nImportant changes to this procedure that should be considered are the impact of policy settings, farmer dispositions, the effect of recent changes on similar farms, and the relative profitability of different land uses. Policy settings and land use profitability can probably be folded into the conversion probabilities of a scenario, but farmer disposition and peer-farmer behaviours would required additional code.\n\n\n\n\n\n\nUpdate History\n\n\n\n\n\n\n\n\nDate\nChanges\n\n\n\n\n2025-10-18\nInitial post.",
    "crumbs": [
      "Documents",
      "Optimisation mode"
    ]
  }
]